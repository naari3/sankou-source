(self.webpackChunkecsy_typescript_boilerplate=self.webpackChunkecsy_typescript_boilerplate||[]).push([[143],{324:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var _utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(458),_Utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(598);function hookConsoleAndErrors(e){["error","warning","log"].forEach((t=>{if("function"==typeof console[t]){var n=console[t].bind(console);console[t]=(...s)=>(e.send({method:"console",type:t,args:JSON.stringify(s)}),n.apply(null,s))}})),window.addEventListener("error",(t=>{e.send({method:"error",error:JSON.stringify({message:t.error.message,stack:t.error.stack})})}))}function includeRemoteIdHTML(e){let t=document.createElement("div");return t.style.cssText="\n    align-items: center;\n    background-color: #333;\n    color: #aaa;\n    display:flex;\n    font-family: Arial;\n    font-size: 1.1em;\n    height: 40px;\n    justify-content: center;\n    left: 0;\n    opacity: 0.9;\n    position: absolute;\n    right: 0;\n    text-align: center;\n    top: 0;\n  ",t.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${e}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(t),t}function enableRemoteDevtools(remoteId){if(!_Utils_js__WEBPACK_IMPORTED_MODULE_0__.Ym)return void console.warn("Remote devtools not available outside the browser");window.generateNewCode=()=>{window.localStorage.clear(),remoteId=(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.O)(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.O)(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=e=>{var t=e.detail.world;Version=e.detail.version,worldsBeforeLoading.push(t)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",(()=>{peer.on("connection",(connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",(function(){infoDiv.innerHTML="Connected",connection.on("data",(function(data){if("init"===data.type){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach((e=>{var t=new CustomEvent("ecsy-world-created",{detail:{world:e,version:Version}});window.dispatchEvent(t)}))},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if("executeScript"===data.type){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value})}}))}))}))}))};(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.L)("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}if(_Utils_js__WEBPACK_IMPORTED_MODULE_0__.Ym){const e=new URLSearchParams(window.location.search);e.has("enable-remote-devtools")&&enableRemoteDevtools()}},458:(e,t,n)=>{"use strict";function s(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*s));return t}function o(e,t){var n=document.createElement("script");n.src=e,n.onload=t,(document.head||document.documentElement).appendChild(n)}n.d(t,{O:()=>s,L:()=>o})},598:(e,t,n)=>{"use strict";function s(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];if(!r(s))throw new Error("Tried to create a query with an unregistered component");if("object"==typeof s){var o="not"===s.operator?"!":s.operator;t.push(o+s.Component._typeId)}else t.push(s._typeId)}return t.sort().join("-")}n.d(t,{EG:()=>s,Ym:()=>o,zO:()=>i,fh:()=>r});const o="undefined"!=typeof window,i=o&&void 0!==window.performance?performance.now.bind(performance):Date.now.bind(Date);function r(e){return"object"==typeof e&&void 0!==e.Component._typeId||e.isComponent&&void 0!==e._typeId}},869:(e,t,n)=>{"use strict";var s=n(598);class o{constructor(e){this._systems=[],this._executeSystems=[],this.world=e,this.lastExecutedSystem=null}registerSystem(e,t){if(!e.isSystem)throw new Error(`System '${e.name}' does not extend 'System' class`);if(void 0!==this.getSystem(e))return console.warn(`System '${e.getName()}' already registered.`),this;var n=new e(this.world,t);return n.init&&n.init(t),n.order=this._systems.length,this._systems.push(n),n.execute&&(this._executeSystems.push(n),this.sortSystems()),this}unregisterSystem(e){let t=this.getSystem(e);return void 0===t?(console.warn(`Can unregister system '${e.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(t),1),t.execute&&this._executeSystems.splice(this._executeSystems.indexOf(t),1),this)}sortSystems(){this._executeSystems.sort(((e,t)=>e.priority-t.priority||e.order-t.order))}getSystem(e){return this._systems.find((t=>t instanceof e))}getSystems(){return this._systems}removeSystem(e){var t=this._systems.indexOf(e);~t&&this._systems.splice(t,1)}executeSystem(e,t,n){if(e.initialized&&e.canExecute()){let o=(0,s.zO)();e.execute(t,n),e.executeTime=(0,s.zO)()-o,this.lastExecutedSystem=e,e.clearEvents()}}stop(){this._executeSystems.forEach((e=>e.stop()))}execute(e,t,n){this._executeSystems.forEach((s=>(n||s.enabled)&&this.executeSystem(s,e,t)))}stats(){for(var e={numSystems:this._systems.length,systems:{}},t=0;t<this._systems.length;t++){var n=this._systems[t],s=e.systems[n.getName()]={queries:{},executeTime:n.executeTime};for(var o in n.ctx)s.queries[o]=n.ctx[o].stats()}return e}}class i{constructor(e,t){this.freeList=[],this.count=0,this.T=e,this.isObjectPool=!0,void 0!==t&&this.expand(t)}acquire(){return this.freeList.length<=0&&this.expand(Math.round(.2*this.count)+1),this.freeList.pop()}release(e){e.reset(),this.freeList.push(e)}expand(e){for(var t=0;t<e;t++){var n=new this.T;n._pool=this,this.freeList.push(n)}this.count+=e}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class r{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(e,t){let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){return void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t)}removeEventListener(e,t){var n=this._listeners[e];if(void 0!==n){var s=n.indexOf(t);-1!==s&&n.splice(s,1)}}dispatchEvent(e,t,n){this.stats.fired++;var s=this._listeners[e];if(void 0!==s)for(var o=s.slice(0),i=0;i<o.length;i++)o[i].call(this,t,n)}resetCounters(){this.stats.fired=this.stats.handled=0}}class a{constructor(e,t){if(this.Components=[],this.NotComponents=[],e.forEach((e=>{"object"==typeof e?this.NotComponents.push(e.Component):this.Components.push(e)})),0===this.Components.length)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new r,this.reactive=!1,this.key=(0,s.EG)(e);for(var n=0;n<t._entities.length;n++){var o=t._entities[n];this.match(o)&&(o.queries.push(this),this.entities.push(o))}}addEntity(e){e.queries.push(this),this.entities.push(e),this.eventDispatcher.dispatchEvent(a.prototype.ENTITY_ADDED,e)}removeEntity(e){let t=this.entities.indexOf(e);~t&&(this.entities.splice(t,1),t=e.queries.indexOf(this),e.queries.splice(t,1),this.eventDispatcher.dispatchEvent(a.prototype.ENTITY_REMOVED,e))}match(e){return e.hasAllComponents(this.Components)&&!e.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map((e=>e.name)),not:this.NotComponents.map((e=>e.name))},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}a.prototype.ENTITY_ADDED="Query#ENTITY_ADDED",a.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED",a.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class h{constructor(e){this._world=e,this._queries={}}onEntityRemoved(e){for(var t in this._queries){var n=this._queries[t];-1!==e.queries.indexOf(n)&&n.removeEntity(e)}}onEntityComponentAdded(e,t){for(var n in this._queries){var s=this._queries[n];~s.NotComponents.indexOf(t)&&~s.entities.indexOf(e)?s.removeEntity(e):~s.Components.indexOf(t)&&s.match(e)&&!~s.entities.indexOf(e)&&s.addEntity(e)}}onEntityComponentRemoved(e,t){for(var n in this._queries){var s=this._queries[n];~s.NotComponents.indexOf(t)&&!~s.entities.indexOf(e)&&s.match(e)?s.addEntity(e):~s.Components.indexOf(t)&&~s.entities.indexOf(e)&&!s.match(e)&&s.removeEntity(e)}}getQuery(e){var t=(0,s.EG)(e),n=this._queries[t];return n||(this._queries[t]=n=new a(e,this._world)),n}stats(){var e={};for(var t in this._queries)e[t]=this._queries[t].stats();return e}}class m{constructor(e){if(!1!==e){const t=this.constructor.schema;for(const n in t)if(e&&e.hasOwnProperty(n))this[n]=e[n];else{const e=t[n];if(e.hasOwnProperty("default"))this[n]=e.type.clone(e.default);else{const t=e.type;this[n]=t.clone(t.default)}}}this._pool=null}copy(e){const t=this.constructor.schema;for(const n in t){const s=t[n];e.hasOwnProperty(n)&&(this[n]=s.type.copy(e[n],this[n]))}return this}clone(){return(new this.constructor).copy(this)}reset(){const e=this.constructor.schema;for(const t in e){const n=e[t];if(n.hasOwnProperty("default"))this[t]=n.type.copy(n.default,this[t]);else{const e=n.type;this[t]=e.copy(e.default,this[t])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(e){const t=this.constructor.schema;Object.keys(e).forEach((e=>{t.hasOwnProperty(e)||console.warn(`Trying to set attribute '${e}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)}))}}m.schema={},m.isComponent=!0,m.getName=function(){return this.displayName||this.name};class c extends m{}c.isSystemStateComponent=!0;class p extends i{constructor(e,t,n){super(t,void 0),this.entityManager=e,void 0!==n&&this.expand(n)}expand(e){for(var t=0;t<e;t++){var n=new this.T(this.entityManager);n._pool=this,this.freeList.push(n)}this.count+=e}}class d{constructor(e){this.world=e,this.componentsManager=e.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new h(this),this.eventDispatcher=new r,this._entityPool=new p(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(e){return this._entitiesByNames[e]}createEntity(e){var t=this._entityPool.acquire();return t.alive=!0,t.name=e||"",e&&(this._entitiesByNames[e]?console.warn(`Entity name '${e}' already exist`):this._entitiesByNames[e]=t),this._entities.push(t),this.eventDispatcher.dispatchEvent(l,t),t}entityAddComponent(e,t,n){if(void 0===t._typeId&&!this.world.componentsManager._ComponentsMap[t._typeId])throw new Error(`Attempted to add unregistered component "${t.getName()}"`);if(!~e._ComponentTypes.indexOf(t)){e._ComponentTypes.push(t),t.__proto__===c&&e.numStateComponents++;var s=this.world.componentsManager.getComponentsPool(t),o=s?s.acquire():new t(n);s&&n&&o.copy(n),e._components[t._typeId]=o,this._queryManager.onEntityComponentAdded(e,t),this.world.componentsManager.componentAddedToEntity(t),this.eventDispatcher.dispatchEvent(y,e,t)}}entityRemoveComponent(e,t,n){var s=e._ComponentTypes.indexOf(t);~s&&(this.eventDispatcher.dispatchEvent(_,e,t),n?this._entityRemoveComponentSync(e,t,s):(0===e._ComponentTypesToRemove.length&&this.entitiesWithComponentsToRemove.push(e),e._ComponentTypes.splice(s,1),e._ComponentTypesToRemove.push(t),e._componentsToRemove[t._typeId]=e._components[t._typeId],delete e._components[t._typeId]),this._queryManager.onEntityComponentRemoved(e,t),t.__proto__===c&&(e.numStateComponents--,0!==e.numStateComponents||e.alive||e.remove()))}_entityRemoveComponentSync(e,t,n){e._ComponentTypes.splice(n,1);var s=e._components[t._typeId];delete e._components[t._typeId],s.dispose(),this.world.componentsManager.componentRemovedFromEntity(t)}entityRemoveAllComponents(e,t){let n=e._ComponentTypes;for(let s=n.length-1;s>=0;s--)n[s].__proto__!==c&&this.entityRemoveComponent(e,n[s],t)}removeEntity(e,t){var n=this._entities.indexOf(e);if(!~n)throw new Error("Tried to remove entity not in list");e.alive=!1,this.entityRemoveAllComponents(e,t),0===e.numStateComponents&&(this.eventDispatcher.dispatchEvent(u,e),this._queryManager.onEntityRemoved(e),!0===t?this._releaseEntity(e,n):this.entitiesToRemove.push(e))}_releaseEntity(e,t){this._entities.splice(t,1),this._entitiesByNames[e.name]&&delete this._entitiesByNames[e.name],e._pool.release(e)}removeAllEntities(){for(var e=this._entities.length-1;e>=0;e--)this.removeEntity(this._entities[e])}processDeferredRemoval(){if(this.deferredRemovalEnabled){for(let e=0;e<this.entitiesToRemove.length;e++){let t=this.entitiesToRemove[e],n=this._entities.indexOf(t);this._releaseEntity(t,n)}this.entitiesToRemove.length=0;for(let t=0;t<this.entitiesWithComponentsToRemove.length;t++){let n=this.entitiesWithComponentsToRemove[t];for(;n._ComponentTypesToRemove.length>0;){let t=n._ComponentTypesToRemove.pop();var e=n._componentsToRemove[t._typeId];delete n._componentsToRemove[t._typeId],e.dispose(),this.world.componentsManager.componentRemovedFromEntity(t)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(e){return this._queryManager.getQuery(e)}count(){return this._entities.length}stats(){var e={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var t in this.componentsManager._componentPool){var n=this.componentsManager._componentPool[t];e.componentPool[n.T.getName()]={used:n.totalUsed(),size:n.count}}return e}}const l="EntityManager#ENTITY_CREATE",u="EntityManager#ENTITY_REMOVED",y="EntityManager#COMPONENT_ADDED",_="EntityManager#COMPONENT_REMOVE";class g{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(e){return-1!==this.Components.indexOf(e)}registerComponent(e,t){if(-1!==this.Components.indexOf(e))return void console.warn(`Component type: '${e.getName()}' already registered.`);const n=e.schema;if(!n)throw new Error(`Component "${e.getName()}" has no schema property.`);for(const t in n)if(!n[t].type)throw new Error(`Invalid schema for component "${e.getName()}". Missing type for "${t}" property.`);e._typeId=this.nextComponentId++,this.Components.push(e),this._ComponentsMap[e._typeId]=e,this.numComponents[e._typeId]=0,void 0===t?t=new i(e):!1===t&&(t=void 0),this._componentPool[e._typeId]=t}componentAddedToEntity(e){this.numComponents[e._typeId]++}componentRemovedFromEntity(e){this.numComponents[e._typeId]--}getComponentsPool(e){return this._componentPool[e._typeId]}}new WeakMap;class v{constructor(e){this._entityManager=e||null,this.id=e._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(e,t){var n=this._components[e._typeId];return n||!0!==t||(n=this._componentsToRemove[e._typeId]),n}getRemovedComponent(e){return this._componentsToRemove[e._typeId]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(e){var t=this._components[e._typeId];if(t){for(var n=0;n<this.queries.length;n++){var s=this.queries[n];s.reactive&&-1!==s.Components.indexOf(e)&&s.eventDispatcher.dispatchEvent(a.prototype.COMPONENT_CHANGED,this,t)}return t}}addComponent(e,t){return this._entityManager.entityAddComponent(this,e,t),this}removeComponent(e,t){return this._entityManager.entityRemoveComponent(this,e,t),this}hasComponent(e,t){return!!~this._ComponentTypes.indexOf(e)||!0===t&&this.hasRemovedComponent(e)}hasRemovedComponent(e){return!!~this._ComponentTypesToRemove.indexOf(e)}hasAllComponents(e){for(var t=0;t<e.length;t++)if(!this.hasComponent(e[t]))return!1;return!0}hasAnyComponents(e){for(var t=0;t<e.length;t++)if(this.hasComponent(e[t]))return!0;return!1}removeAllComponents(e){return this._entityManager.entityRemoveAllComponents(this,e)}copy(e){for(var t in e._components){var n=e._components[t];this.addComponent(n.constructor),this.getComponent(n.constructor).copy(n)}return this}clone(){return new v(this._entityManager).copy(this)}reset(){for(var e in this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0,this._components)delete this._components[e]}remove(e){return this._entityManager.removeEntity(this,e)}}const f={entityPoolSize:0,entityClass:v};class C{canExecute(){if(0===this._mandatoryQueries.length)return!0;for(let e=0;e<this._mandatoryQueries.length;e++)if(0===this._mandatoryQueries[e].entities.length)return!1;return!0}getName(){return this.constructor.getName()}constructor(e,t){if(this.world=e,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,t&&t.priority&&(this.priority=t.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var n in this.constructor.queries){var o=this.constructor.queries[n],i=o.components;if(!i||0===i.length)throw new Error("'components' attribute can't be empty in a query");let e=i.filter((e=>!(0,s.fh)(e)));if(e.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${n}' with unregistered components: [${e.map((e=>e.getName())).join(", ")}]`);var r=this.world.entityManager.queryComponents(i);this._queries[n]=r,!0===o.mandatory&&this._mandatoryQueries.push(r),this.queries[n]={results:r.entities};var h=["added","removed","changed"];const t={added:a.prototype.ENTITY_ADDED,removed:a.prototype.ENTITY_REMOVED,changed:a.prototype.COMPONENT_CHANGED};o.listen&&h.forEach((e=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${h.join(", ")}) for query '${n}' but it does not implement the 'execute' method.`),o.listen[e]){let s=o.listen[e];if("changed"===e){if(r.reactive=!0,!0===s){let t=this.queries[n][e]=[];r.eventDispatcher.addEventListener(a.prototype.COMPONENT_CHANGED,(e=>{-1===t.indexOf(e)&&t.push(e)}))}else if(Array.isArray(s)){let t=this.queries[n][e]=[];r.eventDispatcher.addEventListener(a.prototype.COMPONENT_CHANGED,((e,n)=>{-1!==s.indexOf(n.constructor)&&-1===t.indexOf(e)&&t.push(e)}))}}else{let s=this.queries[n][e]=[];r.eventDispatcher.addEventListener(t[e],(e=>{-1===s.indexOf(e)&&s.push(e)}))}}}))}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let t in this.queries){var e=this.queries[t];if(e.added&&(e.added.length=0),e.removed&&(e.removed.length=0),e.changed)if(Array.isArray(e.changed))e.changed.length=0;else for(let t in e.changed)e.changed[t].length=0}}toJSON(){var e={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var t=this.constructor.queries;for(let n in t){let s=this.queries[n],o=t[n],i=e.queries[n]={key:this._queries[n].key};i.mandatory=!0===o.mandatory,i.reactive=o.listen&&(!0===o.listen.added||!0===o.listen.removed||!0===o.listen.changed||Array.isArray(o.listen.changed)),i.reactive&&(i.listen={},["added","removed","changed"].forEach((e=>{s[e]&&(i.listen[e]={entities:s[e].length})})))}}return e}}function E(e){return{operator:"not",Component:e}}C.isSystem=!0,C.getName=function(){return this.displayName||this.name};class w extends m{constructor(){super(!1)}}w.isTagComponent=!0;const x=e=>e,T=e=>e;function O(e){var t=["name","default","copy","clone"].filter((t=>!e.hasOwnProperty(t)));if(t.length>0)throw new Error(`createType expects a type definition with the following properties: ${t.join(", ")}`);return e.isType=!0,e}const M={Number:O({name:"Number",default:0,copy:x,clone:T}),Boolean:O({name:"Boolean",default:!1,copy:x,clone:T}),String:O({name:"String",default:"",copy:x,clone:T}),Array:O({name:"Array",default:[],copy:(e,t)=>{if(!e)return e;if(!t)return e.slice();t.length=0;for(let n=0;n<e.length;n++)t.push(e[n]);return t},clone:e=>e&&e.slice()}),Ref:O({name:"Ref",default:void 0,copy:x,clone:T}),JSON:O({name:"JSON",default:null,copy:e=>JSON.parse(JSON.stringify(e)),clone:e=>JSON.parse(JSON.stringify(e))})};n(324);class S extends m{}S.schema={x:{type:M.Number},y:{type:M.Number}};class N extends m{}N.schema={x:{type:M.Number},y:{type:M.Number}};class q extends w{}class R extends m{}R.schema={primitive:{type:M.String,default:"box"}};class b extends m{constructor(){super(),this.reset()}reset(){this.config=void 0,this.app=void 0}}b.schema={app:{type:M.Ref},elem:{type:M.Ref},config:{type:M.JSON}};class I extends m{}I.schema={name:{type:M.String},fileName:{type:M.String}};const D=O({name:"PixiRef",default:void 0,copy:x,clone:T});class A extends c{}A.schema={ref:{type:D}};class P extends m{}P.schema={name:{type:M.String},url:{type:M.String}};class L extends c{}L.schema={state:{type:M.String},progress:{type:M.JSON}};class k extends m{}k.schema={time:{type:M.Number}};class j extends C{execute(e,t){this.queries.moving.results.forEach((e=>{let t=e.getComponent(A),n=e.getComponent(k),s=e.getMutableComponent(N),o=e.getMutableComponent(S),i=null==t?void 0:t.ref;o&&s&&i&&n&&(o.x+=s.x*n.time,o.y+=s.y*n.time,o.x>window.innerWidth+i.width&&(o.x=-i.width),o.x<-i.width&&(o.x=window.innerWidth),o.y>window.innerHeight+i.height&&(o.y=-i.height),o.y<-i.height&&(o.y=window.innerHeight))}))}}j.queries={moving:{components:[N,S,k,A]}};class $ extends C{execute(e,t){var n;null===(n=this.queries.engine.results[0].getComponent(b))||void 0===n||n.app,this.queries.renderables.results.forEach((e=>{}))}}$.queries={engine:{components:[b]},renderables:{components:[q,R]}};var W=n(216);class B extends C{constructor(e,t){super(e,t),console.log("Creation of EngineSystem")}execute(e,t){var n;let s=this.queries.engine.results[0].getMutableComponent(b);s&&!s.app&&(s.app=new W.MxU(s.config),s.app.stage.sortableChildren=!0,null===(n=s.elem)||void 0===n||n.appendChild(s.app.view))}}B.queries={engine:{components:[b]}};class Y extends C{execute(e,t){var n;let s=null===(n=this.queries.engine.results[0].getComponent(b))||void 0===n?void 0:n.app;if(0===this.queries.loaderState.results.length)this.stopSystemsAfter(),this.queries.toLoad.results.forEach((e=>{var t,n;let o=null===(t=e.getComponent(P))||void 0===t?void 0:t.url,i=null===(n=e.getComponent(P))||void 0===n?void 0:n.name;i&&o&&(null==s||s.loader.add(i,o,(()=>{})),this.world.createEntity().addComponent(L,{state:"toLoad"}))}));else{let e=this.queries.loaderState.results[0].getMutableComponent(L);"toLoad"===(null==e?void 0:e.state)&&(e.state="loading",null==s||s.loader.load((()=>{e&&(e.state="loaded"),this.startSystemsAfter()})),null==s||s.loader.onProgress.add(((t,n)=>{e&&(e.progress=t.progress),n.error?console.log(`Loading of ${n.name} at ${n.url} failed!`):console.log(`Loading of ${n.name} at ${n.url} succeed!`)})))}}stopSystemsAfter(){let e=this.world.getSystems();for(var t=e.findIndex((e=>e instanceof Y))+1;t<e.length;t++)e[t].stop()}startSystemsAfter(){let e=this.world.getSystems();for(var t=e.findIndex((e=>e instanceof Y))+1;t<e.length;t++)e[t].play()}}Y.queries={loaderState:{components:[L]},toLoad:{components:[P]},engine:{components:[b]}};class U extends C{execute(e,t){var n;let s=null===(n=this.queries.engine.results[0].getComponent(b))||void 0===n?void 0:n.app;this.queries.creates.results.forEach((e=>{let t=e.getComponent(I),n=e.getComponent(S),o=null==s?void 0:s.loader.resources[(null==t?void 0:t.name)||""],i=new W.jyi(null==o?void 0:o.texture);i.scale.x=i.scale.y=.1+.1*Math.random(),i&&n&&(i.x=null==n?void 0:n.x,i.y=null==n?void 0:n.y),null==s||s.stage.addChild(i),e.addComponent(A,{ref:i})})),this.queries.updates.results.forEach((e=>{e.getComponent(I);let t=e.getComponent(S),n=e.getMutableComponent(A),s=null==n?void 0:n.ref;n&&s&&t&&(s.x=null==t?void 0:t.x,s.y=null==t?void 0:t.y,n.ref=s)}))}}U.queries={creates:{components:[I,E(A),S]},deletes:{components:[E(I),A]},updates:{components:[I,A,S]},engine:{components:[b]}};class H extends C{execute(e,t){this.queries.lifetimes.results.forEach((e=>{let t=e.getMutableComponent(k);t&&(t.time+=1)}))}}H.queries={lifetimes:{components:[k]}};var J=n(615),Q=n(787);function V(e,t){let n=new URLSearchParams(location.search);return parseFloat(n.get(e)||"")||t}const z=new class{constructor(e={}){if(this.options=Object.assign({},f,e),this.componentsManager=new g(this),this.entityManager=new d(this),this.systemManager=new o(this),this.enabled=!0,this.eventQueues={},s.Ym&&"undefined"!=typeof CustomEvent){var t=new CustomEvent("ecsy-world-created",{detail:{world:this,version:"0.3.1"}});window.dispatchEvent(t)}this.lastTime=(0,s.zO)()/1e3}registerComponent(e,t){return this.componentsManager.registerComponent(e,t),this}registerSystem(e,t){return this.systemManager.registerSystem(e,t),this}hasRegisteredComponent(e){return this.componentsManager.hasComponent(e)}unregisterSystem(e){return this.systemManager.unregisterSystem(e),this}getSystem(e){return this.systemManager.getSystem(e)}getSystems(){return this.systemManager.getSystems()}execute(e,t){e||(e=(t=(0,s.zO)()/1e3)-this.lastTime,this.lastTime=t),this.enabled&&(this.systemManager.execute(e,t),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(e){return this.entityManager.createEntity(e)}stats(){return{entities:this.entityManager.stats(),system:this.systemManager.stats()}}};z.registerComponent(S).registerComponent(q).registerComponent(R).registerComponent(N).registerComponent(b).registerComponent(P).registerComponent(L).registerComponent(I).registerComponent(A).registerComponent(k).registerSystem(j).registerSystem($).registerSystem(B).registerSystem(Y).registerSystem(U).registerSystem(H);const G={width:window.innerWidth,height:window.innerHeight,resolution:window.devicePixelRatio,backgroundColor:16777215};let F=document.body;z.createEntity().addComponent(b,{elem:F,config:G}),console.log("world created"),[{name:"afro",url:Q},{name:"itakura",url:J}].forEach((e=>{z.createEntity().addComponent(P,e)}));const K=V("s",.03);function X(){return{primitive:Math.random()>=.5?"afro":"itakura"}}for(let e=0;e<V("c",100);e++){let e=X();z.createEntity().addComponent(N,{x:K*(2*Math.random()-1)+1e-6,y:K*(2*Math.random()-1)+1e-6}).addComponent(R,X()).addComponent(S,{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight}).addComponent(I,{name:e.primitive}).addComponent(k,{time:0})}let Z=performance.now();requestAnimationFrame((function e(t){const n=t-Z;Z=t,z.execute(n,t),requestAnimationFrame(e)}))},787:(e,t,n)=>{"use strict";e.exports=n.p+"79ef3d3716e181ecee64.png"},615:(e,t,n)=>{"use strict";e.exports=n.p+"bfd7eb9765085aebc38d.png"}},e=>{"use strict";e(e.s=869)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9ub2RlX21vZHVsZXMvZWNzeS9zcmMvUmVtb3RlRGV2VG9vbHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vbm9kZV9tb2R1bGVzL2Vjc3kvc3JjL1JlbW90ZURldlRvb2xzL3V0aWxzLmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9VdGlscy5qcyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9ub2RlX21vZHVsZXMvZWNzeS9zcmMvU3lzdGVtTWFuYWdlci5qcyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9ub2RlX21vZHVsZXMvZWNzeS9zcmMvT2JqZWN0UG9vbC5qcyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9ub2RlX21vZHVsZXMvZWNzeS9zcmMvRXZlbnREaXNwYXRjaGVyLmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9RdWVyeS5qcyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9ub2RlX21vZHVsZXMvZWNzeS9zcmMvUXVlcnlNYW5hZ2VyLmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vbm9kZV9tb2R1bGVzL2Vjc3kvc3JjL1N5c3RlbVN0YXRlQ29tcG9uZW50LmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9FbnRpdHlNYW5hZ2VyLmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9Db21wb25lbnRNYW5hZ2VyLmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9XcmFwSW1tdXRhYmxlQ29tcG9uZW50LmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9FbnRpdHkuanMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vbm9kZV9tb2R1bGVzL2Vjc3kvc3JjL1dvcmxkLmpzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL25vZGVfbW9kdWxlcy9lY3N5L3NyYy9TeXN0ZW0uanMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vbm9kZV9tb2R1bGVzL2Vjc3kvc3JjL1RhZ0NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9ub2RlX21vZHVsZXMvZWNzeS9zcmMvVHlwZXMuanMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vc3JjL2NsaWVudC9jb21wb25lbnRzL1Bvc2l0aW9uLnRzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL3NyYy9jbGllbnQvY29tcG9uZW50cy9WZWxvY2l0eS50cyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9zcmMvY2xpZW50L2NvbXBvbmVudHMvUmVuZGVyYWJsZS50cyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9zcmMvY2xpZW50L2NvbXBvbmVudHMvU2hhcGUudHMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vc3JjL2NsaWVudC9jb21wb25lbnRzL0VuZ2luZS50cyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9zcmMvY2xpZW50L2NvbXBvbmVudHMvU3ByaXRlLnRzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL3NyYy9jbGllbnQvY29tcG9uZW50cy9SZXNvdXJjZS50cyIsIndlYnBhY2s6Ly9lY3N5LXR5cGVzY3JpcHQtYm9pbGVycGxhdGUvLi9zcmMvY2xpZW50L2NvbXBvbmVudHMvTGlmZXRpbWUudHMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vc3JjL2NsaWVudC9zeXN0ZW1zL01vdmFibGVTeXN0ZW0udHMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vc3JjL2NsaWVudC9zeXN0ZW1zL1JlbmRlcmVyU3lzdGVtLnRzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL3NyYy9jbGllbnQvc3lzdGVtcy9FbmdpbmVTeXN0ZW0udHMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vc3JjL2NsaWVudC9zeXN0ZW1zL1Jlc291cmNlTG9hZGVyU3lzdGVtLnRzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL3NyYy9jbGllbnQvc3lzdGVtcy9TcHJpdGVTeXN0ZW0udHMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vc3JjL2NsaWVudC9zeXN0ZW1zL0xpZmV0aW1lU3lzdGVtLnRzIiwid2VicGFjazovL2Vjc3ktdHlwZXNjcmlwdC1ib2lsZXJwbGF0ZS8uL3NyYy9jbGllbnQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZWNzeS10eXBlc2NyaXB0LWJvaWxlcnBsYXRlLy4vbm9kZV9tb2R1bGVzL2Vjc3kvc3JjL1ZlcnNpb24uanMiXSwibmFtZXMiOlsiaG9va0NvbnNvbGVBbmRFcnJvcnMiLCJjb25uZWN0aW9uIiwiZm9yRWFjaCIsImtleSIsImNvbnNvbGUiLCJmbiIsImJpbmQiLCJhcmdzIiwic2VuZCIsIm1ldGhvZCIsInR5cGUiLCJKU09OIiwic3RyaW5naWZ5IiwiYXBwbHkiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJpbmNsdWRlUmVtb3RlSWRIVE1MIiwicmVtb3RlSWQiLCJpbmZvRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJjc3NUZXh0IiwiaW5uZXJIVE1MIiwiYm9keSIsImFwcGVuZENoaWxkIiwiZW5hYmxlUmVtb3RlRGV2dG9vbHMiLCJ3YXJuIiwiZ2VuZXJhdGVOZXdDb2RlIiwibG9jYWxTdG9yYWdlIiwiY2xlYXIiLCJzZXRJdGVtIiwibG9jYXRpb24iLCJyZWxvYWQiLCJnZXRJdGVtIiwiX19FQ1NZX1JFTU9URV9ERVZUT09MU19JTkpFQ1RFRCIsIl9fRUNTWV9SRU1PVEVfREVWVE9PTFMiLCJWZXJzaW9uIiwid29ybGRzQmVmb3JlTG9hZGluZyIsIm9uV29ybGRDcmVhdGVkIiwiZSIsIndvcmxkIiwiZGV0YWlsIiwidmVyc2lvbiIsInB1c2giLCJvbkxvYWRlZCIsInBlZXIiLCJQZWVyIiwiaG9zdCIsInNlY3VyZSIsInBvcnQiLCJjb25maWciLCJpY2VTZXJ2ZXJzIiwidXJsIiwiZGVidWciLCJvbiIsImRhdGEiLCJzY3JpcHQiLCJzZXRBdHRyaWJ1dGUiLCJvbmxvYWQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImRpc3BhdGNoRXZlbnQiLCJoZWFkIiwiZG9jdW1lbnRFbGVtZW50IiwidmFsdWUiLCJldmFsIiwicmV0dXJuRXZhbCIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaCIsImhhcyIsImdlbmVyYXRlSWQiLCJsZW5ndGgiLCJyZXN1bHQiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpbmplY3RTY3JpcHQiLCJzcmMiLCJvbkxvYWQiLCJxdWVyeUtleSIsIkNvbXBvbmVudHMiLCJpZHMiLCJuIiwiVCIsImNvbXBvbmVudFJlZ2lzdGVyZWQiLCJFcnJvciIsIm9wZXJhdG9yIiwiQ29tcG9uZW50IiwiX3R5cGVJZCIsInNvcnQiLCJqb2luIiwiaGFzV2luZG93Iiwibm93IiwicGVyZm9ybWFuY2UiLCJEYXRlIiwidW5kZWZpbmVkIiwiaXNDb21wb25lbnQiLCJTeXN0ZW1NYW5hZ2VyIiwidGhpcyIsIl9zeXN0ZW1zIiwiX2V4ZWN1dGVTeXN0ZW1zIiwibGFzdEV4ZWN1dGVkU3lzdGVtIiwiU3lzdGVtQ2xhc3MiLCJhdHRyaWJ1dGVzIiwiaXNTeXN0ZW0iLCJuYW1lIiwiZ2V0U3lzdGVtIiwiZ2V0TmFtZSIsInN5c3RlbSIsImluaXQiLCJvcmRlciIsImV4ZWN1dGUiLCJzb3J0U3lzdGVtcyIsInNwbGljZSIsImluZGV4T2YiLCJhIiwiYiIsInByaW9yaXR5IiwiZmluZCIsInMiLCJpbmRleCIsImRlbHRhIiwidGltZSIsImluaXRpYWxpemVkIiwiY2FuRXhlY3V0ZSIsInN0YXJ0VGltZSIsImV4ZWN1dGVUaW1lIiwiY2xlYXJFdmVudHMiLCJzdG9wIiwiZm9yY2VQbGF5IiwiZW5hYmxlZCIsImV4ZWN1dGVTeXN0ZW0iLCJzdGF0cyIsIm51bVN5c3RlbXMiLCJzeXN0ZW1zIiwic3lzdGVtU3RhdHMiLCJxdWVyaWVzIiwiY3R4IiwiT2JqZWN0UG9vbCIsImluaXRpYWxTaXplIiwiZnJlZUxpc3QiLCJjb3VudCIsImlzT2JqZWN0UG9vbCIsImV4cGFuZCIsInJvdW5kIiwicG9wIiwiaXRlbSIsInJlc2V0IiwiY2xvbmUiLCJfcG9vbCIsIkV2ZW50RGlzcGF0Y2hlciIsIl9saXN0ZW5lcnMiLCJmaXJlZCIsImhhbmRsZWQiLCJldmVudE5hbWUiLCJsaXN0ZW5lciIsImxpc3RlbmVycyIsImxpc3RlbmVyQXJyYXkiLCJlbnRpdHkiLCJjb21wb25lbnQiLCJhcnJheSIsInNsaWNlIiwiY2FsbCIsIlF1ZXJ5IiwibWFuYWdlciIsIk5vdENvbXBvbmVudHMiLCJlbnRpdGllcyIsImV2ZW50RGlzcGF0Y2hlciIsInJlYWN0aXZlIiwiX2VudGl0aWVzIiwibWF0Y2giLCJwcm90b3R5cGUiLCJFTlRJVFlfQURERUQiLCJFTlRJVFlfUkVNT1ZFRCIsImhhc0FsbENvbXBvbmVudHMiLCJoYXNBbnlDb21wb25lbnRzIiwiY29tcG9uZW50cyIsImluY2x1ZGVkIiwibWFwIiwiQyIsIm5vdCIsIm51bUVudGl0aWVzIiwibnVtQ29tcG9uZW50cyIsIkNPTVBPTkVOVF9DSEFOR0VEIiwiUXVlcnlNYW5hZ2VyIiwiX3dvcmxkIiwiX3F1ZXJpZXMiLCJxdWVyeU5hbWUiLCJxdWVyeSIsInJlbW92ZUVudGl0eSIsImFkZEVudGl0eSIsInByb3BzIiwic2NoZW1hIiwiY29uc3RydWN0b3IiLCJoYXNPd25Qcm9wZXJ0eSIsInNjaGVtYVByb3AiLCJkZWZhdWx0Iiwic291cmNlIiwicHJvcCIsImNvcHkiLCJyZWxlYXNlIiwiT2JqZWN0Iiwia2V5cyIsInNyY0tleSIsImRpc3BsYXlOYW1lIiwiU3lzdGVtU3RhdGVDb21wb25lbnQiLCJpc1N5c3RlbVN0YXRlQ29tcG9uZW50IiwiRW50aXR5UG9vbCIsImVudGl0eU1hbmFnZXIiLCJlbnRpdHlDbGFzcyIsInN1cGVyIiwiRW50aXR5TWFuYWdlciIsImNvbXBvbmVudHNNYW5hZ2VyIiwiX25leHRFbnRpdHlJZCIsIl9lbnRpdGllc0J5TmFtZXMiLCJfcXVlcnlNYW5hZ2VyIiwiX2VudGl0eVBvb2wiLCJvcHRpb25zIiwiZW50aXR5UG9vbFNpemUiLCJlbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUiLCJlbnRpdGllc1RvUmVtb3ZlIiwiZGVmZXJyZWRSZW1vdmFsRW5hYmxlZCIsImFjcXVpcmUiLCJhbGl2ZSIsIkVOVElUWV9DUkVBVEVEIiwidmFsdWVzIiwiX0NvbXBvbmVudHNNYXAiLCJfQ29tcG9uZW50VHlwZXMiLCJfX3Byb3RvX18iLCJudW1TdGF0ZUNvbXBvbmVudHMiLCJjb21wb25lbnRQb29sIiwiZ2V0Q29tcG9uZW50c1Bvb2wiLCJfY29tcG9uZW50cyIsIm9uRW50aXR5Q29tcG9uZW50QWRkZWQiLCJjb21wb25lbnRBZGRlZFRvRW50aXR5IiwiQ09NUE9ORU5UX0FEREVEIiwiaW1tZWRpYXRlbHkiLCJDT01QT05FTlRfUkVNT1ZFIiwiX2VudGl0eVJlbW92ZUNvbXBvbmVudFN5bmMiLCJfQ29tcG9uZW50VHlwZXNUb1JlbW92ZSIsIl9jb21wb25lbnRzVG9SZW1vdmUiLCJvbkVudGl0eUNvbXBvbmVudFJlbW92ZWQiLCJyZW1vdmUiLCJkaXNwb3NlIiwiY29tcG9uZW50UmVtb3ZlZEZyb21FbnRpdHkiLCJqIiwiZW50aXR5UmVtb3ZlQ29tcG9uZW50IiwiZW50aXR5UmVtb3ZlQWxsQ29tcG9uZW50cyIsIm9uRW50aXR5UmVtb3ZlZCIsIl9yZWxlYXNlRW50aXR5IiwiZ2V0UXVlcnkiLCJudW1RdWVyaWVzIiwibnVtQ29tcG9uZW50UG9vbCIsIl9jb21wb25lbnRQb29sIiwiZWNzeUNvbXBvbmVudElkIiwicG9vbCIsInVzZWQiLCJ0b3RhbFVzZWQiLCJzaXplIiwiQ29tcG9uZW50TWFuYWdlciIsIm5leHRDb21wb25lbnRJZCIsIm9iamVjdFBvb2wiLCJwcm9wTmFtZSIsIldlYWtNYXAiLCJFbnRpdHkiLCJfZW50aXR5TWFuYWdlciIsImlkIiwiaW5jbHVkZVJlbW92ZWQiLCJlbnRpdHlBZGRDb21wb25lbnQiLCJmb3JjZUltbWVkaWF0ZSIsImhhc1JlbW92ZWRDb21wb25lbnQiLCJoYXNDb21wb25lbnQiLCJzcmNDb21wb25lbnQiLCJhZGRDb21wb25lbnQiLCJnZXRDb21wb25lbnQiLCJERUZBVUxUX09QVElPTlMiLCJTeXN0ZW0iLCJfbWFuZGF0b3J5UXVlcmllcyIsInF1ZXJ5Q29uZmlnIiwidW5yZWdpc3RlcmVkQ29tcG9uZW50cyIsImZpbHRlciIsImMiLCJxdWVyeUNvbXBvbmVudHMiLCJtYW5kYXRvcnkiLCJyZXN1bHRzIiwidmFsaWRFdmVudHMiLCJldmVudE1hcHBpbmciLCJhZGRlZCIsInJlbW92ZWQiLCJjaGFuZ2VkIiwibGlzdGVuIiwiZXZlbnRMaXN0IiwiQXJyYXkiLCJpc0FycmF5IiwiY2hhbmdlZENvbXBvbmVudCIsImpzb24iLCJxdWVyeURlZmluaXRpb24iLCJqc29uUXVlcnkiLCJOb3QiLCJUYWdDb21wb25lbnQiLCJpc1RhZ0NvbXBvbmVudCIsImNvcHlWYWx1ZSIsImNsb25lVmFsdWUiLCJjcmVhdGVUeXBlIiwidHlwZURlZmluaXRpb24iLCJ1bmRlZmluZWRQcm9wZXJ0aWVzIiwicCIsImlzVHlwZSIsIlR5cGVzIiwiTnVtYmVyIiwiQm9vbGVhbiIsIlN0cmluZyIsImRlc3QiLCJSZWYiLCJwYXJzZSIsIlBvc2l0aW9uIiwieCIsInkiLCJWZWxvY2l0eSIsIlJlbmRlcmFibGUiLCJTaGFwZSIsInByaW1pdGl2ZSIsIkVuZ2luZSIsImFwcCIsImVsZW0iLCJTcHJpdGUiLCJmaWxlTmFtZSIsIlBpeGlSZWYiLCJTcHJpdGVTdGF0ZSIsInJlZiIsIlJlc291cmNlIiwiUmVzb3VyY2VTdGF0ZSIsInN0YXRlIiwicHJvZ3Jlc3MiLCJMaWZldGltZSIsIk1vdmFibGVTeXN0ZW0iLCJtb3ZpbmciLCJzcHJpdGVTdGF0ZSIsImxpZmV0aW1lIiwidmVsb2NpdHkiLCJnZXRNdXRhYmxlQ29tcG9uZW50IiwicG9zaXRpb24iLCJzcHJpdGUiLCJpbm5lcldpZHRoIiwid2lkdGgiLCJpbm5lckhlaWdodCIsImhlaWdodCIsIlJlbmRlcmVyU3lzdGVtIiwiZW5naW5lIiwicmVuZGVyYWJsZXMiLCJFbmdpbmVTeXN0ZW0iLCJsb2ciLCJzdGFnZSIsInNvcnRhYmxlQ2hpbGRyZW4iLCJ2aWV3IiwiUmVzb3VyY2VMb2FkZXJTeXN0ZW0iLCJsb2FkZXJTdGF0ZSIsInN0b3BTeXN0ZW1zQWZ0ZXIiLCJ0b0xvYWQiLCJsb2FkZXIiLCJhZGQiLCJjcmVhdGVFbnRpdHkiLCJsb2FkaW5nU3RhdGUiLCJsb2FkIiwic3RhcnRTeXN0ZW1zQWZ0ZXIiLCJvblByb2dyZXNzIiwicmVzb3VyY2UiLCJnZXRTeXN0ZW1zIiwiZmluZEluZGV4IiwicGxheSIsIlNwcml0ZVN5c3RlbSIsImNyZWF0ZXMiLCJzcHJpdGVJbmZvIiwic2hlZXQiLCJyZXNvdXJjZXMiLCJ0ZXh0dXJlIiwic2NhbGUiLCJhZGRDaGlsZCIsInVwZGF0ZXMiLCJkZWxldGVzIiwiTGlmZXRpbWVTeXN0ZW0iLCJsaWZldGltZXMiLCJnZXRTZXR0aW5ncyIsInBhdGgiLCJkZWZ1YWx0IiwicGFyc2VGbG9hdCIsImdldCIsImFzc2lnbiIsInN5c3RlbU1hbmFnZXIiLCJldmVudFF1ZXVlcyIsImxhc3RUaW1lIiwicmVnaXN0ZXJDb21wb25lbnQiLCJyZWdpc3RlclN5c3RlbSIsInVucmVnaXN0ZXJTeXN0ZW0iLCJwcm9jZXNzRGVmZXJyZWRSZW1vdmFsIiwicmVzb2x1dGlvbiIsImRldmljZVBpeGVsUmF0aW8iLCJiYWNrZ3JvdW5kQ29sb3IiLCJzcGVlZCIsImdldFJhbmRvbVNoYXBlIiwic2hhcGUiLCJwcmV2VGltZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVwZGF0ZSIsImR0Il0sIm1hcHBpbmdzIjoic1VBSUEsU0FBU0EscUJBQXFCQyxHQUNSLENBQUMsUUFBUyxVQUFXLE9BQzNCQyxTQUFTQyxJQUNyQixHQUE0QixtQkFBakJDLFFBQVFELEdBQXFCLENBQ3RDLElBQUlFLEVBQUtELFFBQVFELEdBQUtHLEtBQUtGLFNBQzNCQSxRQUFRRCxHQUFPLElBQUlJLEtBQ2pCTixFQUFXTyxLQUFLLENBQ2RDLE9BQVEsVUFDUkMsS0FBTVAsRUFDTkksS0FBTUksS0FBS0MsVUFBVUwsS0FFaEJGLEVBQUdRLE1BQU0sS0FBTU4sUUFLNUJPLE9BQU9DLGlCQUFpQixTQUFVQyxJQUNoQ2YsRUFBV08sS0FBSyxDQUNkQyxPQUFRLFFBQ1JPLE1BQU9MLEtBQUtDLFVBQVUsQ0FDcEJL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LElBQUssQ0FDOUMsSUFBSXlVLEVBQVFELElBQ1ovVyxFQUNHeVUsZUFDQXhGLGFBQWE2QyxFQXZCVCxDQUNMRixFQUFHa0YsR0FBUyxFQUFJclUsS0FBS0UsU0FBVyxHQUFLLEtBQ3JDa1AsRUFBR2lGLEdBQVMsRUFBSXJVLEtBQUtFLFNBQVcsR0FBSyxPQXNCcENzTSxhQUFhK0MsRUFBTytFLEtBQ3BCOUgsYUFBYTBDLEVBbEJULENBQ0xDLEVBQUduUCxLQUFLRSxTQUFXekUsT0FBT3FWLFdBQzFCMUIsRUFBR3BQLEtBQUtFLFNBQVd6RSxPQUFPdVYsY0FpQnpCeEUsYUFBYW9ELEVBQVEsQ0FBRTVOLEtBQU11UyxFQUFNL0UsWUFDbkNoRCxhQUFhNkQsRUFBVSxDQUFFcE4sS0FBTSxJQUdwQyxJQUFJdVIsRUFBV3BULFlBQVlELE1BVzNCc1QsdUJBVEEsU0FBU0MsRUFBT3pSLEdBQ2QsTUFBTTBSLEVBQUsxUixFQUFPdVIsRUFDbEJBLEVBQVd2UixFQUVYMUYsRUFBTStFLFFBQVFxUyxFQUFJMVIsR0FFbEJ3UixzQkFBc0JDLE8iLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBQZWVyICovXG5pbXBvcnQgeyBpbmplY3RTY3JpcHQsIGdlbmVyYXRlSWQgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgaGFzV2luZG93IH0gZnJvbSBcIi4uL1V0aWxzLmpzXCI7XG5cbmZ1bmN0aW9uIGhvb2tDb25zb2xlQW5kRXJyb3JzKGNvbm5lY3Rpb24pIHtcbiAgdmFyIHdyYXBGdW5jdGlvbnMgPSBbXCJlcnJvclwiLCBcIndhcm5pbmdcIiwgXCJsb2dcIl07XG4gIHdyYXBGdW5jdGlvbnMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlW2tleV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFyIGZuID0gY29uc29sZVtrZXldLmJpbmQoY29uc29sZSk7XG4gICAgICBjb25zb2xlW2tleV0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLnNlbmQoe1xuICAgICAgICAgIG1ldGhvZDogXCJjb25zb2xlXCIsXG4gICAgICAgICAgdHlwZToga2V5LFxuICAgICAgICAgIGFyZ3M6IEpTT04uc3RyaW5naWZ5KGFyZ3MpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgY29ubmVjdGlvbi5zZW5kKHtcbiAgICAgIG1ldGhvZDogXCJlcnJvclwiLFxuICAgICAgZXJyb3I6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLmVycm9yLnN0YWNrLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlUmVtb3RlSWRIVE1MKHJlbW90ZUlkKSB7XG4gIGxldCBpbmZvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgaW5mb0Rpdi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcbiAgICBjb2xvcjogI2FhYTtcbiAgICBkaXNwbGF5OmZsZXg7XG4gICAgZm9udC1mYW1pbHk6IEFyaWFsO1xuICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgaGVpZ2h0OiA0MHB4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGxlZnQ6IDA7XG4gICAgb3BhY2l0eTogMC45O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgdG9wOiAwO1xuICBgO1xuXG4gIGluZm9EaXYuaW5uZXJIVE1MID0gYE9wZW4gRUNTWSBkZXZ0b29scyB0byBjb25uZWN0IHRvIHRoaXMgcGFnZSB1c2luZyB0aGUgY29kZTombmJzcDs8YiBzdHlsZT1cImNvbG9yOiAjZmZmXCI+JHtyZW1vdGVJZH08L2I+Jm5ic3A7PGJ1dHRvbiBvbkNsaWNrPVwiZ2VuZXJhdGVOZXdDb2RlKClcIj5HZW5lcmF0ZSBuZXcgY29kZTwvYnV0dG9uPmA7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5mb0Rpdik7XG5cbiAgcmV0dXJuIGluZm9EaXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVSZW1vdGVEZXZ0b29scyhyZW1vdGVJZCkge1xuICBpZiAoIWhhc1dpbmRvdykge1xuICAgIGNvbnNvbGUud2FybihcIlJlbW90ZSBkZXZ0b29scyBub3QgYXZhaWxhYmxlIG91dHNpZGUgdGhlIGJyb3dzZXJcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgd2luZG93LmdlbmVyYXRlTmV3Q29kZSA9ICgpID0+IHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgcmVtb3RlSWQgPSBnZW5lcmF0ZUlkKDYpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImVjc3lSZW1vdGVJZFwiLCByZW1vdGVJZCk7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZChmYWxzZSk7XG4gIH07XG5cbiAgcmVtb3RlSWQgPSByZW1vdGVJZCB8fCB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJlY3N5UmVtb3RlSWRcIik7XG4gIGlmICghcmVtb3RlSWQpIHtcbiAgICByZW1vdGVJZCA9IGdlbmVyYXRlSWQoNik7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZWNzeVJlbW90ZUlkXCIsIHJlbW90ZUlkKTtcbiAgfVxuXG4gIGxldCBpbmZvRGl2ID0gaW5jbHVkZVJlbW90ZUlkSFRNTChyZW1vdGVJZCk7XG5cbiAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFNfSU5KRUNURUQgPSB0cnVlO1xuICB3aW5kb3cuX19FQ1NZX1JFTU9URV9ERVZUT09MUyA9IHt9O1xuXG4gIGxldCBWZXJzaW9uID0gXCJcIjtcblxuICAvLyBUaGlzIGlzIHVzZWQgdG8gY29sbGVjdCB0aGUgd29ybGRzIGNyZWF0ZWQgYmVmb3JlIHRoZSBjb21tdW5pY2F0aW9uIGlzIGJlaW5nIGVzdGFibGlzaGVkXG4gIGxldCB3b3JsZHNCZWZvcmVMb2FkaW5nID0gW107XG4gIGxldCBvbldvcmxkQ3JlYXRlZCA9IChlKSA9PiB7XG4gICAgdmFyIHdvcmxkID0gZS5kZXRhaWwud29ybGQ7XG4gICAgVmVyc2lvbiA9IGUuZGV0YWlsLnZlcnNpb247XG4gICAgd29ybGRzQmVmb3JlTG9hZGluZy5wdXNoKHdvcmxkKTtcbiAgfTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJlY3N5LXdvcmxkLWNyZWF0ZWRcIiwgb25Xb3JsZENyZWF0ZWQpO1xuXG4gIGxldCBvbkxvYWRlZCA9ICgpID0+IHtcbiAgICAvLyB2YXIgcGVlciA9IG5ldyBQZWVyKHJlbW90ZUlkKTtcbiAgICB2YXIgcGVlciA9IG5ldyBQZWVyKHJlbW90ZUlkLCB7XG4gICAgICBob3N0OiBcInBlZXJqcy5lY3N5LmlvXCIsXG4gICAgICBzZWN1cmU6IHRydWUsXG4gICAgICBwb3J0OiA0NDMsXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaWNlU2VydmVyczogW1xuICAgICAgICAgIHsgdXJsOiBcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIiB9LFxuICAgICAgICAgIHsgdXJsOiBcInN0dW46c3R1bjEubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgICB7IHVybDogXCJzdHVuOnN0dW4yLmwuZ29vZ2xlLmNvbToxOTMwMlwiIH0sXG4gICAgICAgICAgeyB1cmw6IFwic3R1bjpzdHVuMy5sLmdvb2dsZS5jb206MTkzMDJcIiB9LFxuICAgICAgICAgIHsgdXJsOiBcInN0dW46c3R1bjQubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICBkZWJ1ZzogMyxcbiAgICB9KTtcblxuICAgIHBlZXIub24oXCJvcGVuXCIsICgvKiBpZCAqLykgPT4ge1xuICAgICAgcGVlci5vbihcImNvbm5lY3Rpb25cIiwgKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgIGNvbm5lY3Rpb24ub24oXCJvcGVuXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBpbmZvRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgIGluZm9EaXYuaW5uZXJIVE1MID0gXCJDb25uZWN0ZWRcIjtcblxuICAgICAgICAgIC8vIFJlY2VpdmUgbWVzc2FnZXNcbiAgICAgICAgICBjb25uZWN0aW9uLm9uKFwiZGF0YVwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gXCJpbml0XCIpIHtcbiAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9qYXZhc2NyaXB0XCIpO1xuICAgICAgICAgICAgICBzY3JpcHQub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cbiAgICAgICAgICAgICAgICAvLyBPbmNlIHRoZSBzY3JpcHQgaXMgaW5qZWN0ZWQgd2UgZG9uJ3QgbmVlZCB0byBsaXN0ZW5cbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgIFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsXG4gICAgICAgICAgICAgICAgICBvbldvcmxkQ3JlYXRlZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgd29ybGRzQmVmb3JlTG9hZGluZy5mb3JFYWNoKCh3b3JsZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7IHdvcmxkOiB3b3JsZCwgdmVyc2lvbjogVmVyc2lvbiB9LFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHNjcmlwdC5pbm5lckhUTUwgPSBkYXRhLnNjcmlwdDtcbiAgICAgICAgICAgICAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICBzY3JpcHQub25sb2FkKCk7XG5cbiAgICAgICAgICAgICAgaG9va0NvbnNvbGVBbmRFcnJvcnMoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJleGVjdXRlU2NyaXB0XCIpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlID0gZXZhbChkYXRhLnNjcmlwdCk7XG4gICAgICAgICAgICAgIGlmIChkYXRhLnJldHVybkV2YWwpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcImV2YWxSZXR1cm5cIixcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEluamVjdCBQZWVySlMgc2NyaXB0XG4gIGluamVjdFNjcmlwdChcbiAgICBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vcGVlcmpzQDAuMy4yMC9kaXN0L3BlZXIubWluLmpzXCIsXG4gICAgb25Mb2FkZWRcbiAgKTtcbn1cblxuaWYgKGhhc1dpbmRvdykge1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuXG4gIC8vIEB0b2RvIFByb3ZpZGUgYSB3YXkgdG8gZGlzYWJsZSBpdCBpZiBuZWVkZWRcbiAgaWYgKHVybFBhcmFtcy5oYXMoXCJlbmFibGUtcmVtb3RlLWRldnRvb2xzXCIpKSB7XG4gICAgZW5hYmxlUmVtb3RlRGV2dG9vbHMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSWQobGVuZ3RoKSB7XG4gIHZhciByZXN1bHQgPSBcIlwiO1xuICB2YXIgY2hhcmFjdGVycyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5XCI7XG4gIHZhciBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RTY3JpcHQoc3JjLCBvbkxvYWQpIHtcbiAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gIC8vIEB0b2RvIFVzZSBsaW5rIHRvIHRoZSBlY3N5LWRldnRvb2xzIHJlcG8/XG4gIHNjcmlwdC5zcmMgPSBzcmM7XG4gIHNjcmlwdC5vbmxvYWQgPSBvbkxvYWQ7XG4gIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbn1cbiIsIi8qKlxuICogUmV0dXJuIHRoZSBuYW1lIG9mIGEgY29tcG9uZW50XG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5uYW1lO1xufVxuXG4vKipcbiAqIFJldHVybiBhIHZhbGlkIHByb3BlcnR5IG5hbWUgZm9yIHRoZSBDb21wb25lbnRcbiAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnRcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb25lbnRQcm9wZXJ0eU5hbWUoQ29tcG9uZW50KSB7XG4gIHJldHVybiBnZXROYW1lKENvbXBvbmVudCk7XG59XG5cbi8qKlxuICogR2V0IGEga2V5IGZyb20gYSBsaXN0IG9mIGNvbXBvbmVudHNcbiAqIEBwYXJhbSB7QXJyYXkoQ29tcG9uZW50KX0gQ29tcG9uZW50cyBBcnJheSBvZiBjb21wb25lbnRzIHRvIGdlbmVyYXRlIHRoZSBrZXlcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeUtleShDb21wb25lbnRzKSB7XG4gIHZhciBpZHMgPSBbXTtcbiAgZm9yICh2YXIgbiA9IDA7IG4gPCBDb21wb25lbnRzLmxlbmd0aDsgbisrKSB7XG4gICAgdmFyIFQgPSBDb21wb25lbnRzW25dO1xuXG4gICAgaWYgKCFjb21wb25lbnRSZWdpc3RlcmVkKFQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRyaWVkIHRvIGNyZWF0ZSBhIHF1ZXJ5IHdpdGggYW4gdW5yZWdpc3RlcmVkIGNvbXBvbmVudGApO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgVCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdmFyIG9wZXJhdG9yID0gVC5vcGVyYXRvciA9PT0gXCJub3RcIiA/IFwiIVwiIDogVC5vcGVyYXRvcjtcbiAgICAgIGlkcy5wdXNoKG9wZXJhdG9yICsgVC5Db21wb25lbnQuX3R5cGVJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlkcy5wdXNoKFQuX3R5cGVJZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGlkcy5zb3J0KCkuam9pbihcIi1cIik7XG59XG5cbi8vIERldGVjdG9yIGZvciBicm93c2VyJ3MgXCJ3aW5kb3dcIlxuZXhwb3J0IGNvbnN0IGhhc1dpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG5cbi8vIHBlcmZvcm1hbmNlLm5vdygpIFwicG9seWZpbGxcIlxuZXhwb3J0IGNvbnN0IG5vdyA9XG4gIGhhc1dpbmRvdyAmJiB0eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlICE9PSBcInVuZGVmaW5lZFwiXG4gICAgPyBwZXJmb3JtYW5jZS5ub3cuYmluZChwZXJmb3JtYW5jZSlcbiAgICA6IERhdGUubm93LmJpbmQoRGF0ZSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wb25lbnRSZWdpc3RlcmVkKFQpIHtcbiAgcmV0dXJuIChcbiAgICAodHlwZW9mIFQgPT09IFwib2JqZWN0XCIgJiYgVC5Db21wb25lbnQuX3R5cGVJZCAhPT0gdW5kZWZpbmVkKSB8fFxuICAgIChULmlzQ29tcG9uZW50ICYmIFQuX3R5cGVJZCAhPT0gdW5kZWZpbmVkKVxuICApO1xufVxuIiwiaW1wb3J0IHsgbm93IH0gZnJvbSBcIi4vVXRpbHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFN5c3RlbU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuX3N5c3RlbXMgPSBbXTtcbiAgICB0aGlzLl9leGVjdXRlU3lzdGVtcyA9IFtdOyAvLyBTeXN0ZW1zIHRoYXQgaGF2ZSBgZXhlY3V0ZWAgbWV0aG9kXG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMubGFzdEV4ZWN1dGVkU3lzdGVtID0gbnVsbDtcbiAgfVxuXG4gIHJlZ2lzdGVyU3lzdGVtKFN5c3RlbUNsYXNzLCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKCFTeXN0ZW1DbGFzcy5pc1N5c3RlbSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU3lzdGVtICcke1N5c3RlbUNsYXNzLm5hbWV9JyBkb2VzIG5vdCBleHRlbmQgJ1N5c3RlbScgY2xhc3NgXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmdldFN5c3RlbShTeXN0ZW1DbGFzcykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc29sZS53YXJuKGBTeXN0ZW0gJyR7U3lzdGVtQ2xhc3MuZ2V0TmFtZSgpfScgYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIHN5c3RlbSA9IG5ldyBTeXN0ZW1DbGFzcyh0aGlzLndvcmxkLCBhdHRyaWJ1dGVzKTtcbiAgICBpZiAoc3lzdGVtLmluaXQpIHN5c3RlbS5pbml0KGF0dHJpYnV0ZXMpO1xuICAgIHN5c3RlbS5vcmRlciA9IHRoaXMuX3N5c3RlbXMubGVuZ3RoO1xuICAgIHRoaXMuX3N5c3RlbXMucHVzaChzeXN0ZW0pO1xuICAgIGlmIChzeXN0ZW0uZXhlY3V0ZSkge1xuICAgICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMucHVzaChzeXN0ZW0pO1xuICAgICAgdGhpcy5zb3J0U3lzdGVtcygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHVucmVnaXN0ZXJTeXN0ZW0oU3lzdGVtQ2xhc3MpIHtcbiAgICBsZXQgc3lzdGVtID0gdGhpcy5nZXRTeXN0ZW0oU3lzdGVtQ2xhc3MpO1xuICAgIGlmIChzeXN0ZW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgQ2FuIHVucmVnaXN0ZXIgc3lzdGVtICcke1N5c3RlbUNsYXNzLmdldE5hbWUoKX0nLiBJdCBkb2Vzbid0IGV4aXN0LmBcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLl9zeXN0ZW1zLnNwbGljZSh0aGlzLl9zeXN0ZW1zLmluZGV4T2Yoc3lzdGVtKSwgMSk7XG5cbiAgICBpZiAoc3lzdGVtLmV4ZWN1dGUpIHtcbiAgICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLnNwbGljZSh0aGlzLl9leGVjdXRlU3lzdGVtcy5pbmRleE9mKHN5c3RlbSksIDEpO1xuICAgIH1cblxuICAgIC8vIEB0b2RvIEFkZCBzeXN0ZW0udW5yZWdpc3RlcigpIGNhbGwgdG8gZnJlZSByZXNvdXJjZXNcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNvcnRTeXN0ZW1zKCkge1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSB8fCBhLm9yZGVyIC0gYi5vcmRlcjtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFN5c3RlbShTeXN0ZW1DbGFzcykge1xuICAgIHJldHVybiB0aGlzLl9zeXN0ZW1zLmZpbmQoKHMpID0+IHMgaW5zdGFuY2VvZiBTeXN0ZW1DbGFzcyk7XG4gIH1cblxuICBnZXRTeXN0ZW1zKCkge1xuICAgIHJldHVybiB0aGlzLl9zeXN0ZW1zO1xuICB9XG5cbiAgcmVtb3ZlU3lzdGVtKFN5c3RlbUNsYXNzKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fc3lzdGVtcy5pbmRleE9mKFN5c3RlbUNsYXNzKTtcbiAgICBpZiAoIX5pbmRleCkgcmV0dXJuO1xuXG4gICAgdGhpcy5fc3lzdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgZXhlY3V0ZVN5c3RlbShzeXN0ZW0sIGRlbHRhLCB0aW1lKSB7XG4gICAgaWYgKHN5c3RlbS5pbml0aWFsaXplZCkge1xuICAgICAgaWYgKHN5c3RlbS5jYW5FeGVjdXRlKCkpIHtcbiAgICAgICAgbGV0IHN0YXJ0VGltZSA9IG5vdygpO1xuICAgICAgICBzeXN0ZW0uZXhlY3V0ZShkZWx0YSwgdGltZSk7XG4gICAgICAgIHN5c3RlbS5leGVjdXRlVGltZSA9IG5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgICB0aGlzLmxhc3RFeGVjdXRlZFN5c3RlbSA9IHN5c3RlbTtcbiAgICAgICAgc3lzdGVtLmNsZWFyRXZlbnRzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLl9leGVjdXRlU3lzdGVtcy5mb3JFYWNoKChzeXN0ZW0pID0+IHN5c3RlbS5zdG9wKCkpO1xuICB9XG5cbiAgZXhlY3V0ZShkZWx0YSwgdGltZSwgZm9yY2VQbGF5KSB7XG4gICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMuZm9yRWFjaChcbiAgICAgIChzeXN0ZW0pID0+XG4gICAgICAgIChmb3JjZVBsYXkgfHwgc3lzdGVtLmVuYWJsZWQpICYmIHRoaXMuZXhlY3V0ZVN5c3RlbShzeXN0ZW0sIGRlbHRhLCB0aW1lKVxuICAgICk7XG4gIH1cblxuICBzdGF0cygpIHtcbiAgICB2YXIgc3RhdHMgPSB7XG4gICAgICBudW1TeXN0ZW1zOiB0aGlzLl9zeXN0ZW1zLmxlbmd0aCxcbiAgICAgIHN5c3RlbXM6IHt9LFxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3N5c3RlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzeXN0ZW0gPSB0aGlzLl9zeXN0ZW1zW2ldO1xuICAgICAgdmFyIHN5c3RlbVN0YXRzID0gKHN0YXRzLnN5c3RlbXNbc3lzdGVtLmdldE5hbWUoKV0gPSB7XG4gICAgICAgIHF1ZXJpZXM6IHt9LFxuICAgICAgICBleGVjdXRlVGltZTogc3lzdGVtLmV4ZWN1dGVUaW1lLFxuICAgICAgfSk7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIHN5c3RlbS5jdHgpIHtcbiAgICAgICAgc3lzdGVtU3RhdHMucXVlcmllc1tuYW1lXSA9IHN5c3RlbS5jdHhbbmFtZV0uc3RhdHMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBPYmplY3RQb29sIHtcbiAgLy8gQHRvZG8gQWRkIGluaXRpYWwgc2l6ZVxuICBjb25zdHJ1Y3RvcihULCBpbml0aWFsU2l6ZSkge1xuICAgIHRoaXMuZnJlZUxpc3QgPSBbXTtcbiAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB0aGlzLlQgPSBUO1xuICAgIHRoaXMuaXNPYmplY3RQb29sID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFNpemUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuZXhwYW5kKGluaXRpYWxTaXplKTtcbiAgICB9XG4gIH1cblxuICBhY3F1aXJlKCkge1xuICAgIC8vIEdyb3cgdGhlIGxpc3QgYnkgMjAlaXNoIGlmIHdlJ3JlIG91dFxuICAgIGlmICh0aGlzLmZyZWVMaXN0Lmxlbmd0aCA8PSAwKSB7XG4gICAgICB0aGlzLmV4cGFuZChNYXRoLnJvdW5kKHRoaXMuY291bnQgKiAwLjIpICsgMSk7XG4gICAgfVxuXG4gICAgdmFyIGl0ZW0gPSB0aGlzLmZyZWVMaXN0LnBvcCgpO1xuXG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cblxuICByZWxlYXNlKGl0ZW0pIHtcbiAgICBpdGVtLnJlc2V0KCk7XG4gICAgdGhpcy5mcmVlTGlzdC5wdXNoKGl0ZW0pO1xuICB9XG5cbiAgZXhwYW5kKGNvdW50KSB7XG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCBjb3VudDsgbisrKSB7XG4gICAgICB2YXIgY2xvbmUgPSBuZXcgdGhpcy5UKCk7XG4gICAgICBjbG9uZS5fcG9vbCA9IHRoaXM7XG4gICAgICB0aGlzLmZyZWVMaXN0LnB1c2goY2xvbmUpO1xuICAgIH1cbiAgICB0aGlzLmNvdW50ICs9IGNvdW50O1xuICB9XG5cbiAgdG90YWxTaXplKCkge1xuICAgIHJldHVybiB0aGlzLmNvdW50O1xuICB9XG5cbiAgdG90YWxGcmVlKCkge1xuICAgIHJldHVybiB0aGlzLmZyZWVMaXN0Lmxlbmd0aDtcbiAgfVxuXG4gIHRvdGFsVXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudCAtIHRoaXMuZnJlZUxpc3QubGVuZ3RoO1xuICB9XG59XG4iLCIvKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgRXZlbnREaXNwYXRjaGVyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50RGlzcGF0Y2hlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMuc3RhdHMgPSB7XG4gICAgICBmaXJlZDogMCxcbiAgICAgIGhhbmRsZWQ6IDAsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQ2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIHRoZSBldmVudCBpcyBmaXJlZFxuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgbGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXTtcbiAgICB9XG5cbiAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0uaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgICBsaXN0ZW5lcnNbZXZlbnROYW1lXS5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gZXZlbnQgbGlzdGVuZXIgaXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgbGlzdCBvZiBsaXN0ZW5lcnNcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byBjaGVja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBDYWxsYmFjayBmb3IgdGhlIHNwZWNpZmllZCBldmVudFxuICAgKi9cbiAgaGFzRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdLmluZGV4T2YobGlzdGVuZXIpICE9PSAtMVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmVtb3ZlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIENhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50XG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICB2YXIgbGlzdGVuZXJBcnJheSA9IHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBpbmRleCA9IGxpc3RlbmVyQXJyYXkuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIGxpc3RlbmVyQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2ggYW4gZXZlbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byBkaXNwYXRjaFxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IChPcHRpb25hbCkgRW50aXR5IHRvIGVtaXRcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudFxuICAgKi9cbiAgZGlzcGF0Y2hFdmVudChldmVudE5hbWUsIGVudGl0eSwgY29tcG9uZW50KSB7XG4gICAgdGhpcy5zdGF0cy5maXJlZCsrO1xuXG4gICAgdmFyIGxpc3RlbmVyQXJyYXkgPSB0aGlzLl9saXN0ZW5lcnNbZXZlbnROYW1lXTtcbiAgICBpZiAobGlzdGVuZXJBcnJheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgYXJyYXkgPSBsaXN0ZW5lckFycmF5LnNsaWNlKDApO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycmF5W2ldLmNhbGwodGhpcywgZW50aXR5LCBjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBzdGF0cyBjb3VudGVyc1xuICAgKi9cbiAgcmVzZXRDb3VudGVycygpIHtcbiAgICB0aGlzLnN0YXRzLmZpcmVkID0gdGhpcy5zdGF0cy5oYW5kbGVkID0gMDtcbiAgfVxufVxuIiwiaW1wb3J0IEV2ZW50RGlzcGF0Y2hlciBmcm9tIFwiLi9FdmVudERpc3BhdGNoZXIuanNcIjtcbmltcG9ydCB7IHF1ZXJ5S2V5IH0gZnJvbSBcIi4vVXRpbHMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUXVlcnkge1xuICAvKipcbiAgICogQHBhcmFtIHtBcnJheShDb21wb25lbnQpfSBDb21wb25lbnRzIExpc3Qgb2YgdHlwZXMgb2YgY29tcG9uZW50cyB0byBxdWVyeVxuICAgKi9cbiAgY29uc3RydWN0b3IoQ29tcG9uZW50cywgbWFuYWdlcikge1xuICAgIHRoaXMuQ29tcG9uZW50cyA9IFtdO1xuICAgIHRoaXMuTm90Q29tcG9uZW50cyA9IFtdO1xuXG4gICAgQ29tcG9uZW50cy5mb3JFYWNoKChjb21wb25lbnQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRoaXMuTm90Q29tcG9uZW50cy5wdXNoKGNvbXBvbmVudC5Db21wb25lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5Db21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLkNvbXBvbmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjcmVhdGUgYSBxdWVyeSB3aXRob3V0IGNvbXBvbmVudHNcIik7XG4gICAgfVxuXG4gICAgdGhpcy5lbnRpdGllcyA9IFtdO1xuXG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIgPSBuZXcgRXZlbnREaXNwYXRjaGVyKCk7XG5cbiAgICAvLyBUaGlzIHF1ZXJ5IGlzIGJlaW5nIHVzZWQgYnkgYSByZWFjdGl2ZSBzeXN0ZW1cbiAgICB0aGlzLnJlYWN0aXZlID0gZmFsc2U7XG5cbiAgICB0aGlzLmtleSA9IHF1ZXJ5S2V5KENvbXBvbmVudHMpO1xuXG4gICAgLy8gRmlsbCB0aGUgcXVlcnkgd2l0aCB0aGUgZXhpc3RpbmcgZW50aXRpZXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hbmFnZXIuX2VudGl0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZW50aXR5ID0gbWFuYWdlci5fZW50aXRpZXNbaV07XG4gICAgICBpZiAodGhpcy5tYXRjaChlbnRpdHkpKSB7XG4gICAgICAgIC8vIEB0b2RvID8/PyB0aGlzLmFkZEVudGl0eShlbnRpdHkpOyA9PiBwcmV2ZW50aW5nIHRoZSBldmVudCB0byBiZSBnZW5lcmF0ZWRcbiAgICAgICAgZW50aXR5LnF1ZXJpZXMucHVzaCh0aGlzKTtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBlbnRpdHkgdG8gdGhpcyBxdWVyeVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gICAqL1xuICBhZGRFbnRpdHkoZW50aXR5KSB7XG4gICAgZW50aXR5LnF1ZXJpZXMucHVzaCh0aGlzKTtcbiAgICB0aGlzLmVudGl0aWVzLnB1c2goZW50aXR5KTtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoUXVlcnkucHJvdG90eXBlLkVOVElUWV9BRERFRCwgZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZW50aXR5IGZyb20gdGhpcyBxdWVyeVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gICAqL1xuICByZW1vdmVFbnRpdHkoZW50aXR5KSB7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XG4gICAgaWYgKH5pbmRleCkge1xuICAgICAgdGhpcy5lbnRpdGllcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICBpbmRleCA9IGVudGl0eS5xdWVyaWVzLmluZGV4T2YodGhpcyk7XG4gICAgICBlbnRpdHkucXVlcmllcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBRdWVyeS5wcm90b3R5cGUuRU5USVRZX1JFTU9WRUQsXG4gICAgICAgIGVudGl0eVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBtYXRjaChlbnRpdHkpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZW50aXR5Lmhhc0FsbENvbXBvbmVudHModGhpcy5Db21wb25lbnRzKSAmJlxuICAgICAgIWVudGl0eS5oYXNBbnlDb21wb25lbnRzKHRoaXMuTm90Q29tcG9uZW50cylcbiAgICApO1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBrZXk6IHRoaXMua2V5LFxuICAgICAgcmVhY3RpdmU6IHRoaXMucmVhY3RpdmUsXG4gICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIGluY2x1ZGVkOiB0aGlzLkNvbXBvbmVudHMubWFwKChDKSA9PiBDLm5hbWUpLFxuICAgICAgICBub3Q6IHRoaXMuTm90Q29tcG9uZW50cy5tYXAoKEMpID0+IEMubmFtZSksXG4gICAgICB9LFxuICAgICAgbnVtRW50aXRpZXM6IHRoaXMuZW50aXRpZXMubGVuZ3RoLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHN0YXRzIGZvciB0aGlzIHF1ZXJ5XG4gICAqL1xuICBzdGF0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbnVtQ29tcG9uZW50czogdGhpcy5Db21wb25lbnRzLmxlbmd0aCxcbiAgICAgIG51bUVudGl0aWVzOiB0aGlzLmVudGl0aWVzLmxlbmd0aCxcbiAgICB9O1xuICB9XG59XG5cblF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfQURERUQgPSBcIlF1ZXJ5I0VOVElUWV9BRERFRFwiO1xuUXVlcnkucHJvdG90eXBlLkVOVElUWV9SRU1PVkVEID0gXCJRdWVyeSNFTlRJVFlfUkVNT1ZFRFwiO1xuUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VEID0gXCJRdWVyeSNDT01QT05FTlRfQ0hBTkdFRFwiO1xuIiwiaW1wb3J0IFF1ZXJ5IGZyb20gXCIuL1F1ZXJ5LmpzXCI7XG5pbXBvcnQgeyBxdWVyeUtleSB9IGZyb20gXCIuL1V0aWxzLmpzXCI7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBRdWVyeU1hbmFnZXJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUXVlcnlNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICB0aGlzLl93b3JsZCA9IHdvcmxkO1xuXG4gICAgLy8gUXVlcmllcyBpbmRleGVkIGJ5IGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb21wb25lbnRzIGl0IGhhc1xuICAgIHRoaXMuX3F1ZXJpZXMgPSB7fTtcbiAgfVxuXG4gIG9uRW50aXR5UmVtb3ZlZChlbnRpdHkpIHtcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdO1xuICAgICAgaWYgKGVudGl0eS5xdWVyaWVzLmluZGV4T2YocXVlcnkpICE9PSAtMSkge1xuICAgICAgICBxdWVyeS5yZW1vdmVFbnRpdHkoZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgd2hlbiBhIGNvbXBvbmVudCBpcyBhZGRlZCB0byBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgdGhhdCBqdXN0IGdvdCB0aGUgbmV3IGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50IENvbXBvbmVudCBhZGRlZCB0byB0aGUgZW50aXR5XG4gICAqL1xuICBvbkVudGl0eUNvbXBvbmVudEFkZGVkKGVudGl0eSwgQ29tcG9uZW50KSB7XG4gICAgLy8gQHRvZG8gVXNlIGJpdG1hc2sgZm9yIGNoZWNraW5nIGNvbXBvbmVudHM/XG5cbiAgICAvLyBDaGVjayBlYWNoIGluZGV4ZWQgcXVlcnkgdG8gc2VlIGlmIHdlIG5lZWQgdG8gYWRkIHRoaXMgZW50aXR5IHRvIHRoZSBsaXN0XG4gICAgZm9yICh2YXIgcXVlcnlOYW1lIGluIHRoaXMuX3F1ZXJpZXMpIHtcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXTtcblxuICAgICAgaWYgKFxuICAgICAgICAhIX5xdWVyeS5Ob3RDb21wb25lbnRzLmluZGV4T2YoQ29tcG9uZW50KSAmJlxuICAgICAgICB+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpXG4gICAgICApIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlRW50aXR5KGVudGl0eSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdGhlIGVudGl0eSBvbmx5IGlmOlxuICAgICAgLy8gQ29tcG9uZW50IGlzIGluIHRoZSBxdWVyeVxuICAgICAgLy8gYW5kIEVudGl0eSBoYXMgQUxMIHRoZSBjb21wb25lbnRzIG9mIHRoZSBxdWVyeVxuICAgICAgLy8gYW5kIEVudGl0eSBpcyBub3QgYWxyZWFkeSBpbiB0aGUgcXVlcnlcbiAgICAgIGlmIChcbiAgICAgICAgIX5xdWVyeS5Db21wb25lbnRzLmluZGV4T2YoQ29tcG9uZW50KSB8fFxuICAgICAgICAhcXVlcnkubWF0Y2goZW50aXR5KSB8fFxuICAgICAgICB+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpXG4gICAgICApXG4gICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICBxdWVyeS5hZGRFbnRpdHkoZW50aXR5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgd2hlbiBhIGNvbXBvbmVudCBpcyByZW1vdmVkIGZyb20gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHRvIHJlbW92ZSB0aGUgY29tcG9uZW50IGZyb21cbiAgICogQHBhcmFtIHtDb21wb25lbnR9IENvbXBvbmVudCBDb21wb25lbnQgdG8gcmVtb3ZlIGZyb20gdGhlIGVudGl0eVxuICAgKi9cbiAgb25FbnRpdHlDb21wb25lbnRSZW1vdmVkKGVudGl0eSwgQ29tcG9uZW50KSB7XG4gICAgZm9yICh2YXIgcXVlcnlOYW1lIGluIHRoaXMuX3F1ZXJpZXMpIHtcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXTtcblxuICAgICAgaWYgKFxuICAgICAgICAhIX5xdWVyeS5Ob3RDb21wb25lbnRzLmluZGV4T2YoQ29tcG9uZW50KSAmJlxuICAgICAgICAhfnF1ZXJ5LmVudGl0aWVzLmluZGV4T2YoZW50aXR5KSAmJlxuICAgICAgICBxdWVyeS5tYXRjaChlbnRpdHkpXG4gICAgICApIHtcbiAgICAgICAgcXVlcnkuYWRkRW50aXR5KGVudGl0eSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgICEhfnF1ZXJ5LkNvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICYmXG4gICAgICAgICEhfnF1ZXJ5LmVudGl0aWVzLmluZGV4T2YoZW50aXR5KSAmJlxuICAgICAgICAhcXVlcnkubWF0Y2goZW50aXR5KVxuICAgICAgKSB7XG4gICAgICAgIHF1ZXJ5LnJlbW92ZUVudGl0eShlbnRpdHkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgcXVlcnkgZm9yIHRoZSBzcGVjaWZpZWQgY29tcG9uZW50c1xuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50cyBDb21wb25lbnRzIHRoYXQgdGhlIHF1ZXJ5IHNob3VsZCBoYXZlXG4gICAqL1xuICBnZXRRdWVyeShDb21wb25lbnRzKSB7XG4gICAgdmFyIGtleSA9IHF1ZXJ5S2V5KENvbXBvbmVudHMpO1xuICAgIHZhciBxdWVyeSA9IHRoaXMuX3F1ZXJpZXNba2V5XTtcbiAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICB0aGlzLl9xdWVyaWVzW2tleV0gPSBxdWVyeSA9IG5ldyBRdWVyeShDb21wb25lbnRzLCB0aGlzLl93b3JsZCk7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gc29tZSBzdGF0cyBmcm9tIHRoaXMgY2xhc3NcbiAgICovXG4gIHN0YXRzKCkge1xuICAgIHZhciBzdGF0cyA9IHt9O1xuICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLl9xdWVyaWVzKSB7XG4gICAgICBzdGF0c1txdWVyeU5hbWVdID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdLnN0YXRzKCk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgaWYgKHByb3BzICE9PSBmYWxzZSkge1xuICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5jb25zdHJ1Y3Rvci5zY2hlbWE7XG5cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNjaGVtYSkge1xuICAgICAgICBpZiAocHJvcHMgJiYgcHJvcHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIHRoaXNba2V5XSA9IHByb3BzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2NoZW1hUHJvcCA9IHNjaGVtYVtrZXldO1xuICAgICAgICAgIGlmIChzY2hlbWFQcm9wLmhhc093blByb3BlcnR5KFwiZGVmYXVsdFwiKSkge1xuICAgICAgICAgICAgdGhpc1trZXldID0gc2NoZW1hUHJvcC50eXBlLmNsb25lKHNjaGVtYVByb3AuZGVmYXVsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBzY2hlbWFQcm9wLnR5cGU7XG4gICAgICAgICAgICB0aGlzW2tleV0gPSB0eXBlLmNsb25lKHR5cGUuZGVmYXVsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgcHJvcHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmNoZWNrVW5kZWZpbmVkQXR0cmlidXRlcyhwcm9wcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcG9vbCA9IG51bGw7XG4gIH1cblxuICBjb3B5KHNvdXJjZSkge1xuICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuY29uc3RydWN0b3Iuc2NoZW1hO1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICBjb25zdCBwcm9wID0gc2NoZW1hW2tleV07XG5cbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICB0aGlzW2tleV0gPSBwcm9wLnR5cGUuY29weShzb3VyY2Vba2V5XSwgdGhpc1trZXldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBAREVCVUdcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICB0aGlzLmNoZWNrVW5kZWZpbmVkQXR0cmlidXRlcyhzb3VyY2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCkuY29weSh0aGlzKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuY29uc3RydWN0b3Iuc2NoZW1hO1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICBjb25zdCBzY2hlbWFQcm9wID0gc2NoZW1hW2tleV07XG5cbiAgICAgIGlmIChzY2hlbWFQcm9wLmhhc093blByb3BlcnR5KFwiZGVmYXVsdFwiKSkge1xuICAgICAgICB0aGlzW2tleV0gPSBzY2hlbWFQcm9wLnR5cGUuY29weShzY2hlbWFQcm9wLmRlZmF1bHQsIHRoaXNba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eXBlID0gc2NoZW1hUHJvcC50eXBlO1xuICAgICAgICB0aGlzW2tleV0gPSB0eXBlLmNvcHkodHlwZS5kZWZhdWx0LCB0aGlzW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgaWYgKHRoaXMuX3Bvb2wpIHtcbiAgICAgIHRoaXMuX3Bvb2wucmVsZWFzZSh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBnZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmdldE5hbWUoKTtcbiAgfVxuXG4gIGNoZWNrVW5kZWZpbmVkQXR0cmlidXRlcyhzcmMpIHtcbiAgICBjb25zdCBzY2hlbWEgPSB0aGlzLmNvbnN0cnVjdG9yLnNjaGVtYTtcblxuICAgIC8vIENoZWNrIHRoYXQgdGhlIGF0dHJpYnV0ZXMgZGVmaW5lZCBpbiBzb3VyY2UgYXJlIGFsc28gZGVmaW5lZCBpbiB0aGUgc2NoZW1hXG4gICAgT2JqZWN0LmtleXMoc3JjKS5mb3JFYWNoKChzcmNLZXkpID0+IHtcbiAgICAgIGlmICghc2NoZW1hLmhhc093blByb3BlcnR5KHNyY0tleSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBUcnlpbmcgdG8gc2V0IGF0dHJpYnV0ZSAnJHtzcmNLZXl9JyBub3QgZGVmaW5lZCBpbiB0aGUgJyR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfScgc2NoZW1hLiBQbGVhc2UgZml4IHRoZSBzY2hlbWEsIHRoZSBhdHRyaWJ1dGUgdmFsdWUgd29uJ3QgYmUgc2V0YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbkNvbXBvbmVudC5zY2hlbWEgPSB7fTtcbkNvbXBvbmVudC5pc0NvbXBvbmVudCA9IHRydWU7XG5Db21wb25lbnQuZ2V0TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuZGlzcGxheU5hbWUgfHwgdGhpcy5uYW1lO1xufTtcbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL0NvbXBvbmVudC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgU3lzdGVtU3RhdGVDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge31cblxuU3lzdGVtU3RhdGVDb21wb25lbnQuaXNTeXN0ZW1TdGF0ZUNvbXBvbmVudCA9IHRydWU7XG4iLCJpbXBvcnQgeyBPYmplY3RQb29sIH0gZnJvbSBcIi4vT2JqZWN0UG9vbC5qc1wiO1xuaW1wb3J0IFF1ZXJ5TWFuYWdlciBmcm9tIFwiLi9RdWVyeU1hbmFnZXIuanNcIjtcbmltcG9ydCBFdmVudERpc3BhdGNoZXIgZnJvbSBcIi4vRXZlbnREaXNwYXRjaGVyLmpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1TdGF0ZUNvbXBvbmVudCB9IGZyb20gXCIuL1N5c3RlbVN0YXRlQ29tcG9uZW50LmpzXCI7XG5cbmNsYXNzIEVudGl0eVBvb2wgZXh0ZW5kcyBPYmplY3RQb29sIHtcbiAgY29uc3RydWN0b3IoZW50aXR5TWFuYWdlciwgZW50aXR5Q2xhc3MsIGluaXRpYWxTaXplKSB7XG4gICAgc3VwZXIoZW50aXR5Q2xhc3MsIHVuZGVmaW5lZCk7XG4gICAgdGhpcy5lbnRpdHlNYW5hZ2VyID0gZW50aXR5TWFuYWdlcjtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFNpemUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuZXhwYW5kKGluaXRpYWxTaXplKTtcbiAgICB9XG4gIH1cblxuICBleHBhbmQoY291bnQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGNvdW50OyBuKyspIHtcbiAgICAgIHZhciBjbG9uZSA9IG5ldyB0aGlzLlQodGhpcy5lbnRpdHlNYW5hZ2VyKTtcbiAgICAgIGNsb25lLl9wb29sID0gdGhpcztcbiAgICAgIHRoaXMuZnJlZUxpc3QucHVzaChjbG9uZSk7XG4gICAgfVxuICAgIHRoaXMuY291bnQgKz0gY291bnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIEVudGl0eU1hbmFnZXJcbiAqL1xuZXhwb3J0IGNsYXNzIEVudGl0eU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMud29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyID0gd29ybGQuY29tcG9uZW50c01hbmFnZXI7XG5cbiAgICAvLyBBbGwgdGhlIGVudGl0aWVzIGluIHRoaXMgaW5zdGFuY2VcbiAgICB0aGlzLl9lbnRpdGllcyA9IFtdO1xuICAgIHRoaXMuX25leHRFbnRpdHlJZCA9IDA7XG5cbiAgICB0aGlzLl9lbnRpdGllc0J5TmFtZXMgPSB7fTtcblxuICAgIHRoaXMuX3F1ZXJ5TWFuYWdlciA9IG5ldyBRdWVyeU1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIgPSBuZXcgRXZlbnREaXNwYXRjaGVyKCk7XG4gICAgdGhpcy5fZW50aXR5UG9vbCA9IG5ldyBFbnRpdHlQb29sKFxuICAgICAgdGhpcyxcbiAgICAgIHRoaXMud29ybGQub3B0aW9ucy5lbnRpdHlDbGFzcyxcbiAgICAgIHRoaXMud29ybGQub3B0aW9ucy5lbnRpdHlQb29sU2l6ZVxuICAgICk7XG5cbiAgICAvLyBEZWZlcnJlZCBkZWxldGlvblxuICAgIHRoaXMuZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlID0gW107XG4gICAgdGhpcy5lbnRpdGllc1RvUmVtb3ZlID0gW107XG4gICAgdGhpcy5kZWZlcnJlZFJlbW92YWxFbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGdldEVudGl0eUJ5TmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0aWVzQnlOYW1lc1tuYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgZW50aXR5XG4gICAqL1xuICBjcmVhdGVFbnRpdHkobmFtZSkge1xuICAgIHZhciBlbnRpdHkgPSB0aGlzLl9lbnRpdHlQb29sLmFjcXVpcmUoKTtcbiAgICBlbnRpdHkuYWxpdmUgPSB0cnVlO1xuICAgIGVudGl0eS5uYW1lID0gbmFtZSB8fCBcIlwiO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICBpZiAodGhpcy5fZW50aXRpZXNCeU5hbWVzW25hbWVdKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRW50aXR5IG5hbWUgJyR7bmFtZX0nIGFscmVhZHkgZXhpc3RgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2VudGl0aWVzQnlOYW1lc1tuYW1lXSA9IGVudGl0eTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9lbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChFTlRJVFlfQ1JFQVRFRCwgZW50aXR5KTtcbiAgICByZXR1cm4gZW50aXR5O1xuICB9XG5cbiAgLy8gQ09NUE9ORU5UU1xuXG4gIC8qKlxuICAgKiBBZGQgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHdoZXJlIHRoZSBjb21wb25lbnQgd2lsbCBiZSBhZGRlZFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50IENvbXBvbmVudCB0byBiZSBhZGRlZCB0byB0aGUgZW50aXR5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgT3B0aW9uYWwgdmFsdWVzIHRvIHJlcGxhY2UgdGhlIGRlZmF1bHQgYXR0cmlidXRlc1xuICAgKi9cbiAgZW50aXR5QWRkQ29tcG9uZW50KGVudGl0eSwgQ29tcG9uZW50LCB2YWx1ZXMpIHtcbiAgICAvLyBAdG9kbyBQcm9iYWJseSBkZWZpbmUgQ29tcG9uZW50Ll90eXBlSWQgd2l0aCBhIGRlZmF1bHQgdmFsdWUgYW5kIGF2b2lkIHVzaW5nIHR5cGVvZlxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBDb21wb25lbnQuX3R5cGVJZCA9PT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgIXRoaXMud29ybGQuY29tcG9uZW50c01hbmFnZXIuX0NvbXBvbmVudHNNYXBbQ29tcG9uZW50Ll90eXBlSWRdXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBBdHRlbXB0ZWQgdG8gYWRkIHVucmVnaXN0ZXJlZCBjb21wb25lbnQgXCIke0NvbXBvbmVudC5nZXROYW1lKCl9XCJgXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh+ZW50aXR5Ll9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCkpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiQ29tcG9uZW50IHR5cGUgYWxyZWFkeSBleGlzdHMgb24gZW50aXR5LlwiLFxuICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgICBDb21wb25lbnQuZ2V0TmFtZSgpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZW50aXR5Ll9Db21wb25lbnRUeXBlcy5wdXNoKENvbXBvbmVudCk7XG5cbiAgICBpZiAoQ29tcG9uZW50Ll9fcHJvdG9fXyA9PT0gU3lzdGVtU3RhdGVDb21wb25lbnQpIHtcbiAgICAgIGVudGl0eS5udW1TdGF0ZUNvbXBvbmVudHMrKztcbiAgICB9XG5cbiAgICB2YXIgY29tcG9uZW50UG9vbCA9IHRoaXMud29ybGQuY29tcG9uZW50c01hbmFnZXIuZ2V0Q29tcG9uZW50c1Bvb2woXG4gICAgICBDb21wb25lbnRcbiAgICApO1xuXG4gICAgdmFyIGNvbXBvbmVudCA9IGNvbXBvbmVudFBvb2xcbiAgICAgID8gY29tcG9uZW50UG9vbC5hY3F1aXJlKClcbiAgICAgIDogbmV3IENvbXBvbmVudCh2YWx1ZXMpO1xuXG4gICAgaWYgKGNvbXBvbmVudFBvb2wgJiYgdmFsdWVzKSB7XG4gICAgICBjb21wb25lbnQuY29weSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGVudGl0eS5fY29tcG9uZW50c1tDb21wb25lbnQuX3R5cGVJZF0gPSBjb21wb25lbnQ7XG5cbiAgICB0aGlzLl9xdWVyeU1hbmFnZXIub25FbnRpdHlDb21wb25lbnRBZGRlZChlbnRpdHksIENvbXBvbmVudCk7XG4gICAgdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5jb21wb25lbnRBZGRlZFRvRW50aXR5KENvbXBvbmVudCk7XG5cbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KENPTVBPTkVOVF9BRERFRCwgZW50aXR5LCBDb21wb25lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSB3aGljaCB3aWxsIGdldCByZW1vdmVkIHRoZSBjb21wb25lbnRcbiAgICogQHBhcmFtIHsqfSBDb21wb25lbnQgQ29tcG9uZW50IHRvIHJlbW92ZSBmcm9tIHRoZSBlbnRpdHlcbiAgICogQHBhcmFtIHtCb29sfSBpbW1lZGlhdGVseSBJZiB5b3Ugd2FudCB0byByZW1vdmUgdGhlIGNvbXBvbmVudCBpbW1lZGlhdGVseSBpbnN0ZWFkIG9mIGRlZmVycmVkIChEZWZhdWx0IGlzIGZhbHNlKVxuICAgKi9cbiAgZW50aXR5UmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgQ29tcG9uZW50LCBpbW1lZGlhdGVseSkge1xuICAgIHZhciBpbmRleCA9IGVudGl0eS5fQ29tcG9uZW50VHlwZXMuaW5kZXhPZihDb21wb25lbnQpO1xuICAgIGlmICghfmluZGV4KSByZXR1cm47XG5cbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KENPTVBPTkVOVF9SRU1PVkUsIGVudGl0eSwgQ29tcG9uZW50KTtcblxuICAgIGlmIChpbW1lZGlhdGVseSkge1xuICAgICAgdGhpcy5fZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyhlbnRpdHksIENvbXBvbmVudCwgaW5kZXgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZW50aXR5Ll9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUucHVzaChlbnRpdHkpO1xuXG4gICAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUucHVzaChDb21wb25lbnQpO1xuXG4gICAgICBlbnRpdHkuX2NvbXBvbmVudHNUb1JlbW92ZVtDb21wb25lbnQuX3R5cGVJZF0gPVxuICAgICAgICBlbnRpdHkuX2NvbXBvbmVudHNbQ29tcG9uZW50Ll90eXBlSWRdO1xuICAgICAgZGVsZXRlIGVudGl0eS5fY29tcG9uZW50c1tDb21wb25lbnQuX3R5cGVJZF07XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZWFjaCBpbmRleGVkIHF1ZXJ5IHRvIHNlZSBpZiB3ZSBuZWVkIHRvIHJlbW92ZSBpdFxuICAgIHRoaXMuX3F1ZXJ5TWFuYWdlci5vbkVudGl0eUNvbXBvbmVudFJlbW92ZWQoZW50aXR5LCBDb21wb25lbnQpO1xuXG4gICAgaWYgKENvbXBvbmVudC5fX3Byb3RvX18gPT09IFN5c3RlbVN0YXRlQ29tcG9uZW50KSB7XG4gICAgICBlbnRpdHkubnVtU3RhdGVDb21wb25lbnRzLS07XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSBlbnRpdHkgd2FzIGEgZ2hvc3Qgd2FpdGluZyBmb3IgdGhlIGxhc3Qgc3lzdGVtIHN0YXRlIGNvbXBvbmVudCB0byBiZSByZW1vdmVkXG4gICAgICBpZiAoZW50aXR5Lm51bVN0YXRlQ29tcG9uZW50cyA9PT0gMCAmJiAhZW50aXR5LmFsaXZlKSB7XG4gICAgICAgIGVudGl0eS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyhlbnRpdHksIENvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAvLyBSZW1vdmUgVCBsaXN0aW5nIG9uIGVudGl0eSBhbmQgcHJvcGVydHkgcmVmLCB0aGVuIGZyZWUgdGhlIGNvbXBvbmVudC5cbiAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5fY29tcG9uZW50c1tDb21wb25lbnQuX3R5cGVJZF07XG4gICAgZGVsZXRlIGVudGl0eS5fY29tcG9uZW50c1tDb21wb25lbnQuX3R5cGVJZF07XG4gICAgY29tcG9uZW50LmRpc3Bvc2UoKTtcbiAgICB0aGlzLndvcmxkLmNvbXBvbmVudHNNYW5hZ2VyLmNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5KENvbXBvbmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCB0aGUgY29tcG9uZW50cyBmcm9tIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSBmcm9tIHdoaWNoIHRoZSBjb21wb25lbnRzIHdpbGwgYmUgcmVtb3ZlZFxuICAgKi9cbiAgZW50aXR5UmVtb3ZlQWxsQ29tcG9uZW50cyhlbnRpdHksIGltbWVkaWF0ZWx5KSB7XG4gICAgbGV0IENvbXBvbmVudHMgPSBlbnRpdHkuX0NvbXBvbmVudFR5cGVzO1xuXG4gICAgZm9yIChsZXQgaiA9IENvbXBvbmVudHMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgIGlmIChDb21wb25lbnRzW2pdLl9fcHJvdG9fXyAhPT0gU3lzdGVtU3RhdGVDb21wb25lbnQpXG4gICAgICAgIHRoaXMuZW50aXR5UmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgQ29tcG9uZW50c1tqXSwgaW1tZWRpYXRlbHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGVudGl0eSBmcm9tIHRoaXMgbWFuYWdlci4gSXQgd2lsbCBjbGVhciBhbHNvIGl0cyBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHRvIHJlbW92ZSBmcm9tIHRoZSBtYW5hZ2VyXG4gICAqIEBwYXJhbSB7Qm9vbH0gaW1tZWRpYXRlbHkgSWYgeW91IHdhbnQgdG8gcmVtb3ZlIHRoZSBjb21wb25lbnQgaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBkZWZlcnJlZCAoRGVmYXVsdCBpcyBmYWxzZSlcbiAgICovXG4gIHJlbW92ZUVudGl0eShlbnRpdHksIGltbWVkaWF0ZWx5KSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xuXG4gICAgaWYgKCF+aW5kZXgpIHRocm93IG5ldyBFcnJvcihcIlRyaWVkIHRvIHJlbW92ZSBlbnRpdHkgbm90IGluIGxpc3RcIik7XG5cbiAgICBlbnRpdHkuYWxpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmVudGl0eVJlbW92ZUFsbENvbXBvbmVudHMoZW50aXR5LCBpbW1lZGlhdGVseSk7XG5cbiAgICBpZiAoZW50aXR5Lm51bVN0YXRlQ29tcG9uZW50cyA9PT0gMCkge1xuICAgICAgLy8gUmVtb3ZlIGZyb20gZW50aXR5IGxpc3RcbiAgICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoRU5USVRZX1JFTU9WRUQsIGVudGl0eSk7XG4gICAgICB0aGlzLl9xdWVyeU1hbmFnZXIub25FbnRpdHlSZW1vdmVkKGVudGl0eSk7XG4gICAgICBpZiAoaW1tZWRpYXRlbHkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fcmVsZWFzZUVudGl0eShlbnRpdHksIGluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXNUb1JlbW92ZS5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3JlbGVhc2VFbnRpdHkoZW50aXR5LCBpbmRleCkge1xuICAgIHRoaXMuX2VudGl0aWVzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICBpZiAodGhpcy5fZW50aXRpZXNCeU5hbWVzW2VudGl0eS5uYW1lXSkge1xuICAgICAgZGVsZXRlIHRoaXMuX2VudGl0aWVzQnlOYW1lc1tlbnRpdHkubmFtZV07XG4gICAgfVxuICAgIGVudGl0eS5fcG9vbC5yZWxlYXNlKGVudGl0eSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBlbnRpdGllcyBmcm9tIHRoaXMgbWFuYWdlclxuICAgKi9cbiAgcmVtb3ZlQWxsRW50aXRpZXMoKSB7XG4gICAgZm9yICh2YXIgaSA9IHRoaXMuX2VudGl0aWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLnJlbW92ZUVudGl0eSh0aGlzLl9lbnRpdGllc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgcHJvY2Vzc0RlZmVycmVkUmVtb3ZhbCgpIHtcbiAgICBpZiAoIXRoaXMuZGVmZXJyZWRSZW1vdmFsRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbnRpdGllc1RvUmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZW50aXR5ID0gdGhpcy5lbnRpdGllc1RvUmVtb3ZlW2ldO1xuICAgICAgbGV0IGluZGV4ID0gdGhpcy5fZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xuICAgICAgdGhpcy5fcmVsZWFzZUVudGl0eShlbnRpdHksIGluZGV4KTtcbiAgICB9XG4gICAgdGhpcy5lbnRpdGllc1RvUmVtb3ZlLmxlbmd0aCA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZW50aXR5ID0gdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmVbaV07XG4gICAgICB3aGlsZSAoZW50aXR5Ll9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IENvbXBvbmVudCA9IGVudGl0eS5fQ29tcG9uZW50VHlwZXNUb1JlbW92ZS5wb3AoKTtcblxuICAgICAgICB2YXIgY29tcG9uZW50ID0gZW50aXR5Ll9jb21wb25lbnRzVG9SZW1vdmVbQ29tcG9uZW50Ll90eXBlSWRdO1xuICAgICAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzVG9SZW1vdmVbQ29tcG9uZW50Ll90eXBlSWRdO1xuICAgICAgICBjb21wb25lbnQuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLndvcmxkLmNvbXBvbmVudHNNYW5hZ2VyLmNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5KENvbXBvbmVudCk7XG5cbiAgICAgICAgLy90aGlzLl9lbnRpdHlSZW1vdmVDb21wb25lbnRTeW5jKGVudGl0eSwgQ29tcG9uZW50LCBpbmRleCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUubGVuZ3RoID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBxdWVyeSBiYXNlZCBvbiBhIGxpc3Qgb2YgY29tcG9uZW50c1xuICAgKiBAcGFyYW0ge0FycmF5KENvbXBvbmVudCl9IENvbXBvbmVudHMgTGlzdCBvZiBjb21wb25lbnRzIHRoYXQgd2lsbCBmb3JtIHRoZSBxdWVyeVxuICAgKi9cbiAgcXVlcnlDb21wb25lbnRzKENvbXBvbmVudHMpIHtcbiAgICByZXR1cm4gdGhpcy5fcXVlcnlNYW5hZ2VyLmdldFF1ZXJ5KENvbXBvbmVudHMpO1xuICB9XG5cbiAgLy8gRVhUUkFTXG5cbiAgLyoqXG4gICAqIFJldHVybiBudW1iZXIgb2YgZW50aXRpZXNcbiAgICovXG4gIGNvdW50KCkge1xuICAgIHJldHVybiB0aGlzLl9lbnRpdGllcy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHNvbWUgc3RhdHNcbiAgICovXG4gIHN0YXRzKCkge1xuICAgIHZhciBzdGF0cyA9IHtcbiAgICAgIG51bUVudGl0aWVzOiB0aGlzLl9lbnRpdGllcy5sZW5ndGgsXG4gICAgICBudW1RdWVyaWVzOiBPYmplY3Qua2V5cyh0aGlzLl9xdWVyeU1hbmFnZXIuX3F1ZXJpZXMpLmxlbmd0aCxcbiAgICAgIHF1ZXJpZXM6IHRoaXMuX3F1ZXJ5TWFuYWdlci5zdGF0cygpLFxuICAgICAgbnVtQ29tcG9uZW50UG9vbDogT2JqZWN0LmtleXModGhpcy5jb21wb25lbnRzTWFuYWdlci5fY29tcG9uZW50UG9vbClcbiAgICAgICAgLmxlbmd0aCxcbiAgICAgIGNvbXBvbmVudFBvb2w6IHt9LFxuICAgICAgZXZlbnREaXNwYXRjaGVyOiB0aGlzLmV2ZW50RGlzcGF0Y2hlci5zdGF0cyxcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgZWNzeUNvbXBvbmVudElkIGluIHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2wpIHtcbiAgICAgIHZhciBwb29sID0gdGhpcy5jb21wb25lbnRzTWFuYWdlci5fY29tcG9uZW50UG9vbFtlY3N5Q29tcG9uZW50SWRdO1xuICAgICAgc3RhdHMuY29tcG9uZW50UG9vbFtwb29sLlQuZ2V0TmFtZSgpXSA9IHtcbiAgICAgICAgdXNlZDogcG9vbC50b3RhbFVzZWQoKSxcbiAgICAgICAgc2l6ZTogcG9vbC5jb3VudCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG59XG5cbmNvbnN0IEVOVElUWV9DUkVBVEVEID0gXCJFbnRpdHlNYW5hZ2VyI0VOVElUWV9DUkVBVEVcIjtcbmNvbnN0IEVOVElUWV9SRU1PVkVEID0gXCJFbnRpdHlNYW5hZ2VyI0VOVElUWV9SRU1PVkVEXCI7XG5jb25zdCBDT01QT05FTlRfQURERUQgPSBcIkVudGl0eU1hbmFnZXIjQ09NUE9ORU5UX0FEREVEXCI7XG5jb25zdCBDT01QT05FTlRfUkVNT1ZFID0gXCJFbnRpdHlNYW5hZ2VyI0NPTVBPTkVOVF9SRU1PVkVcIjtcbiIsImltcG9ydCB7IE9iamVjdFBvb2wgfSBmcm9tIFwiLi9PYmplY3RQb29sLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21wb25lbnRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5Db21wb25lbnRzID0gW107XG4gICAgdGhpcy5fQ29tcG9uZW50c01hcCA9IHt9O1xuXG4gICAgdGhpcy5fY29tcG9uZW50UG9vbCA9IHt9O1xuICAgIHRoaXMubnVtQ29tcG9uZW50cyA9IHt9O1xuICAgIHRoaXMubmV4dENvbXBvbmVudElkID0gMDtcbiAgfVxuXG4gIGhhc0NvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5Db21wb25lbnRzLmluZGV4T2YoQ29tcG9uZW50KSAhPT0gLTE7XG4gIH1cblxuICByZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQsIG9iamVjdFBvb2wpIHtcbiAgICBpZiAodGhpcy5Db21wb25lbnRzLmluZGV4T2YoQ29tcG9uZW50KSAhPT0gLTEpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYENvbXBvbmVudCB0eXBlOiAnJHtDb21wb25lbnQuZ2V0TmFtZSgpfScgYWxyZWFkeSByZWdpc3RlcmVkLmBcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2NoZW1hID0gQ29tcG9uZW50LnNjaGVtYTtcblxuICAgIGlmICghc2NoZW1hKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDb21wb25lbnQgXCIke0NvbXBvbmVudC5nZXROYW1lKCl9XCIgaGFzIG5vIHNjaGVtYSBwcm9wZXJ0eS5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gc2NoZW1hKSB7XG4gICAgICBjb25zdCBwcm9wID0gc2NoZW1hW3Byb3BOYW1lXTtcblxuICAgICAgaWYgKCFwcm9wLnR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBJbnZhbGlkIHNjaGVtYSBmb3IgY29tcG9uZW50IFwiJHtDb21wb25lbnQuZ2V0TmFtZSgpfVwiLiBNaXNzaW5nIHR5cGUgZm9yIFwiJHtwcm9wTmFtZX1cIiBwcm9wZXJ0eS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQ29tcG9uZW50Ll90eXBlSWQgPSB0aGlzLm5leHRDb21wb25lbnRJZCsrO1xuICAgIHRoaXMuQ29tcG9uZW50cy5wdXNoKENvbXBvbmVudCk7XG4gICAgdGhpcy5fQ29tcG9uZW50c01hcFtDb21wb25lbnQuX3R5cGVJZF0gPSBDb21wb25lbnQ7XG4gICAgdGhpcy5udW1Db21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXSA9IDA7XG5cbiAgICBpZiAob2JqZWN0UG9vbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBvYmplY3RQb29sID0gbmV3IE9iamVjdFBvb2woQ29tcG9uZW50KTtcbiAgICB9IGVsc2UgaWYgKG9iamVjdFBvb2wgPT09IGZhbHNlKSB7XG4gICAgICBvYmplY3RQb29sID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbXBvbmVudFBvb2xbQ29tcG9uZW50Ll90eXBlSWRdID0gb2JqZWN0UG9vbDtcbiAgfVxuXG4gIGNvbXBvbmVudEFkZGVkVG9FbnRpdHkoQ29tcG9uZW50KSB7XG4gICAgdGhpcy5udW1Db21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXSsrO1xuICB9XG5cbiAgY29tcG9uZW50UmVtb3ZlZEZyb21FbnRpdHkoQ29tcG9uZW50KSB7XG4gICAgdGhpcy5udW1Db21wb25lbnRzW0NvbXBvbmVudC5fdHlwZUlkXS0tO1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50c1Bvb2woQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudFBvb2xbQ29tcG9uZW50Ll90eXBlSWRdO1xuICB9XG59XG4iLCJjb25zdCBwcm94eU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5cbmNvbnN0IHByb3h5SGFuZGxlciA9IHtcbiAgc2V0KHRhcmdldCwgcHJvcCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUcmllZCB0byB3cml0ZSB0byBcIiR7dGFyZ2V0LmNvbnN0cnVjdG9yLmdldE5hbWUoKX0jJHtTdHJpbmcoXG4gICAgICAgIHByb3BcbiAgICAgICl9XCIgb24gaW1tdXRhYmxlIGNvbXBvbmVudC4gVXNlIC5nZXRNdXRhYmxlQ29tcG9uZW50KCkgdG8gbW9kaWZ5IGEgY29tcG9uZW50LmBcbiAgICApO1xuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd3JhcEltbXV0YWJsZUNvbXBvbmVudChULCBjb21wb25lbnQpIHtcbiAgaWYgKGNvbXBvbmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxldCB3cmFwcGVkQ29tcG9uZW50ID0gcHJveHlNYXAuZ2V0KGNvbXBvbmVudCk7XG5cbiAgaWYgKCF3cmFwcGVkQ29tcG9uZW50KSB7XG4gICAgd3JhcHBlZENvbXBvbmVudCA9IG5ldyBQcm94eShjb21wb25lbnQsIHByb3h5SGFuZGxlcik7XG4gICAgcHJveHlNYXAuc2V0KGNvbXBvbmVudCwgd3JhcHBlZENvbXBvbmVudCk7XG4gIH1cblxuICByZXR1cm4gd3JhcHBlZENvbXBvbmVudDtcbn1cbiIsImltcG9ydCBRdWVyeSBmcm9tIFwiLi9RdWVyeS5qc1wiO1xuaW1wb3J0IHdyYXBJbW11dGFibGVDb21wb25lbnQgZnJvbSBcIi4vV3JhcEltbXV0YWJsZUNvbXBvbmVudC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRW50aXR5IHtcbiAgY29uc3RydWN0b3IoZW50aXR5TWFuYWdlcikge1xuICAgIHRoaXMuX2VudGl0eU1hbmFnZXIgPSBlbnRpdHlNYW5hZ2VyIHx8IG51bGw7XG5cbiAgICAvLyBVbmlxdWUgSUQgZm9yIHRoaXMgZW50aXR5XG4gICAgdGhpcy5pZCA9IGVudGl0eU1hbmFnZXIuX25leHRFbnRpdHlJZCsrO1xuXG4gICAgLy8gTGlzdCBvZiBjb21wb25lbnRzIHR5cGVzIHRoZSBlbnRpdHkgaGFzXG4gICAgdGhpcy5fQ29tcG9uZW50VHlwZXMgPSBbXTtcblxuICAgIC8vIEluc3RhbmNlIG9mIHRoZSBjb21wb25lbnRzXG4gICAgdGhpcy5fY29tcG9uZW50cyA9IHt9O1xuXG4gICAgdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlID0ge307XG5cbiAgICAvLyBRdWVyaWVzIHdoZXJlIHRoZSBlbnRpdHkgaXMgYWRkZWRcbiAgICB0aGlzLnF1ZXJpZXMgPSBbXTtcblxuICAgIC8vIFVzZWQgZm9yIGRlZmVycmVkIHJlbW92YWxcbiAgICB0aGlzLl9Db21wb25lbnRUeXBlc1RvUmVtb3ZlID0gW107XG5cbiAgICB0aGlzLmFsaXZlID0gZmFsc2U7XG5cbiAgICAvL2lmIHRoZXJlIGFyZSBzdGF0ZSBjb21wb25lbnRzIG9uIGEgZW50aXR5LCBpdCBjYW4ndCBiZSByZW1vdmVkIGNvbXBsZXRlbHlcbiAgICB0aGlzLm51bVN0YXRlQ29tcG9uZW50cyA9IDA7XG4gIH1cblxuICAvLyBDT01QT05FTlRTXG5cbiAgZ2V0Q29tcG9uZW50KENvbXBvbmVudCwgaW5jbHVkZVJlbW92ZWQpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1tDb21wb25lbnQuX3R5cGVJZF07XG5cbiAgICBpZiAoIWNvbXBvbmVudCAmJiBpbmNsdWRlUmVtb3ZlZCA9PT0gdHJ1ZSkge1xuICAgICAgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlW0NvbXBvbmVudC5fdHlwZUlkXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiXG4gICAgICA/IHdyYXBJbW11dGFibGVDb21wb25lbnQoQ29tcG9uZW50LCBjb21wb25lbnQpXG4gICAgICA6IGNvbXBvbmVudDtcbiAgfVxuXG4gIGdldFJlbW92ZWRDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlW0NvbXBvbmVudC5fdHlwZUlkXTtcblxuICAgIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCJcbiAgICAgID8gd3JhcEltbXV0YWJsZUNvbXBvbmVudChDb21wb25lbnQsIGNvbXBvbmVudClcbiAgICAgIDogY29tcG9uZW50O1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50cztcbiAgfVxuXG4gIGdldENvbXBvbmVudHNUb1JlbW92ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlO1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50VHlwZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX0NvbXBvbmVudFR5cGVzO1xuICB9XG5cbiAgZ2V0TXV0YWJsZUNvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1tDb21wb25lbnQuX3R5cGVJZF07XG5cbiAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5xdWVyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbaV07XG4gICAgICAvLyBAdG9kbyBhY2NlbGVyYXRlIHRoaXMgY2hlY2suIE1heWJlIGhhdmluZyBxdWVyeS5fQ29tcG9uZW50cyBhcyBhbiBvYmplY3RcbiAgICAgIC8vIEB0b2RvIGFkZCBOb3QgY29tcG9uZW50c1xuICAgICAgaWYgKHF1ZXJ5LnJlYWN0aXZlICYmIHF1ZXJ5LkNvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICE9PSAtMSkge1xuICAgICAgICBxdWVyeS5ldmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBjb21wb25lbnRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxuXG4gIGFkZENvbXBvbmVudChDb21wb25lbnQsIHZhbHVlcykge1xuICAgIHRoaXMuX2VudGl0eU1hbmFnZXIuZW50aXR5QWRkQ29tcG9uZW50KHRoaXMsIENvbXBvbmVudCwgdmFsdWVzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlbW92ZUNvbXBvbmVudChDb21wb25lbnQsIGZvcmNlSW1tZWRpYXRlKSB7XG4gICAgdGhpcy5fZW50aXR5TWFuYWdlci5lbnRpdHlSZW1vdmVDb21wb25lbnQodGhpcywgQ29tcG9uZW50LCBmb3JjZUltbWVkaWF0ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBoYXNDb21wb25lbnQoQ29tcG9uZW50LCBpbmNsdWRlUmVtb3ZlZCkge1xuICAgIHJldHVybiAoXG4gICAgICAhIX50aGlzLl9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCkgfHxcbiAgICAgIChpbmNsdWRlUmVtb3ZlZCA9PT0gdHJ1ZSAmJiB0aGlzLmhhc1JlbW92ZWRDb21wb25lbnQoQ29tcG9uZW50KSlcbiAgICApO1xuICB9XG5cbiAgaGFzUmVtb3ZlZENvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gISF+dGhpcy5fQ29tcG9uZW50VHlwZXNUb1JlbW92ZS5pbmRleE9mKENvbXBvbmVudCk7XG4gIH1cblxuICBoYXNBbGxDb21wb25lbnRzKENvbXBvbmVudHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IENvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdGhpcy5oYXNDb21wb25lbnQoQ29tcG9uZW50c1tpXSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBoYXNBbnlDb21wb25lbnRzKENvbXBvbmVudHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IENvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLmhhc0NvbXBvbmVudChDb21wb25lbnRzW2ldKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJlbW92ZUFsbENvbXBvbmVudHMoZm9yY2VJbW1lZGlhdGUpIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXR5TWFuYWdlci5lbnRpdHlSZW1vdmVBbGxDb21wb25lbnRzKHRoaXMsIGZvcmNlSW1tZWRpYXRlKTtcbiAgfVxuXG4gIGNvcHkoc3JjKSB7XG4gICAgLy8gVE9ETzogVGhpcyBjYW4gZGVmaW5pdGVseSBiZSBvcHRpbWl6ZWRcbiAgICBmb3IgKHZhciBlY3N5Q29tcG9uZW50SWQgaW4gc3JjLl9jb21wb25lbnRzKSB7XG4gICAgICB2YXIgc3JjQ29tcG9uZW50ID0gc3JjLl9jb21wb25lbnRzW2Vjc3lDb21wb25lbnRJZF07XG4gICAgICB0aGlzLmFkZENvbXBvbmVudChzcmNDb21wb25lbnQuY29uc3RydWN0b3IpO1xuICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuZ2V0Q29tcG9uZW50KHNyY0NvbXBvbmVudC5jb25zdHJ1Y3Rvcik7XG4gICAgICBjb21wb25lbnQuY29weShzcmNDb21wb25lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBFbnRpdHkodGhpcy5fZW50aXR5TWFuYWdlcikuY29weSh0aGlzKTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuaWQgPSB0aGlzLl9lbnRpdHlNYW5hZ2VyLl9uZXh0RW50aXR5SWQrKztcbiAgICB0aGlzLl9Db21wb25lbnRUeXBlcy5sZW5ndGggPSAwO1xuICAgIHRoaXMucXVlcmllcy5sZW5ndGggPSAwO1xuXG4gICAgZm9yICh2YXIgZWNzeUNvbXBvbmVudElkIGluIHRoaXMuX2NvbXBvbmVudHMpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9jb21wb25lbnRzW2Vjc3lDb21wb25lbnRJZF07XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlKGZvcmNlSW1tZWRpYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0eU1hbmFnZXIucmVtb3ZlRW50aXR5KHRoaXMsIGZvcmNlSW1tZWRpYXRlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgU3lzdGVtTWFuYWdlciB9IGZyb20gXCIuL1N5c3RlbU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IEVudGl0eU1hbmFnZXIgfSBmcm9tIFwiLi9FbnRpdHlNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBDb21wb25lbnRNYW5hZ2VyIH0gZnJvbSBcIi4vQ29tcG9uZW50TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgVmVyc2lvbiB9IGZyb20gXCIuL1ZlcnNpb24uanNcIjtcbmltcG9ydCB7IGhhc1dpbmRvdywgbm93IH0gZnJvbSBcIi4vVXRpbHMuanNcIjtcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuL0VudGl0eS5qc1wiO1xuXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSB7XG4gIGVudGl0eVBvb2xTaXplOiAwLFxuICBlbnRpdHlDbGFzczogRW50aXR5LFxufTtcblxuZXhwb3J0IGNsYXNzIFdvcmxkIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBvcHRpb25zKTtcblxuICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIgPSBuZXcgQ29tcG9uZW50TWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLmVudGl0eU1hbmFnZXIgPSBuZXcgRW50aXR5TWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLnN5c3RlbU1hbmFnZXIgPSBuZXcgU3lzdGVtTWFuYWdlcih0aGlzKTtcblxuICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cbiAgICB0aGlzLmV2ZW50UXVldWVzID0ge307XG5cbiAgICBpZiAoaGFzV2luZG93ICYmIHR5cGVvZiBDdXN0b21FdmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsIHtcbiAgICAgICAgZGV0YWlsOiB7IHdvcmxkOiB0aGlzLCB2ZXJzaW9uOiBWZXJzaW9uIH0sXG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RUaW1lID0gbm93KCkgLyAxMDAwO1xuICB9XG5cbiAgcmVnaXN0ZXJDb21wb25lbnQoQ29tcG9uZW50LCBvYmplY3RQb29sKSB7XG4gICAgdGhpcy5jb21wb25lbnRzTWFuYWdlci5yZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQsIG9iamVjdFBvb2wpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmVnaXN0ZXJTeXN0ZW0oU3lzdGVtLCBhdHRyaWJ1dGVzKSB7XG4gICAgdGhpcy5zeXN0ZW1NYW5hZ2VyLnJlZ2lzdGVyU3lzdGVtKFN5c3RlbSwgYXR0cmlidXRlcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBoYXNSZWdpc3RlcmVkQ29tcG9uZW50KENvbXBvbmVudCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLmhhc0NvbXBvbmVudChDb21wb25lbnQpO1xuICB9XG5cbiAgdW5yZWdpc3RlclN5c3RlbShTeXN0ZW0pIHtcbiAgICB0aGlzLnN5c3RlbU1hbmFnZXIudW5yZWdpc3RlclN5c3RlbShTeXN0ZW0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0U3lzdGVtKFN5c3RlbUNsYXNzKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtTWFuYWdlci5nZXRTeXN0ZW0oU3lzdGVtQ2xhc3MpO1xuICB9XG5cbiAgZ2V0U3lzdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW1NYW5hZ2VyLmdldFN5c3RlbXMoKTtcbiAgfVxuXG4gIGV4ZWN1dGUoZGVsdGEsIHRpbWUpIHtcbiAgICBpZiAoIWRlbHRhKSB7XG4gICAgICB0aW1lID0gbm93KCkgLyAxMDAwO1xuICAgICAgZGVsdGEgPSB0aW1lIC0gdGhpcy5sYXN0VGltZTtcbiAgICAgIHRoaXMubGFzdFRpbWUgPSB0aW1lO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3lzdGVtTWFuYWdlci5leGVjdXRlKGRlbHRhLCB0aW1lKTtcbiAgICAgIHRoaXMuZW50aXR5TWFuYWdlci5wcm9jZXNzRGVmZXJyZWRSZW1vdmFsKCk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGNyZWF0ZUVudGl0eShuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50aXR5TWFuYWdlci5jcmVhdGVFbnRpdHkobmFtZSk7XG4gIH1cblxuICBzdGF0cygpIHtcbiAgICB2YXIgc3RhdHMgPSB7XG4gICAgICBlbnRpdGllczogdGhpcy5lbnRpdHlNYW5hZ2VyLnN0YXRzKCksXG4gICAgICBzeXN0ZW06IHRoaXMuc3lzdGVtTWFuYWdlci5zdGF0cygpLFxuICAgIH07XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cbiIsImltcG9ydCBRdWVyeSBmcm9tIFwiLi9RdWVyeS5qc1wiO1xuaW1wb3J0IHsgY29tcG9uZW50UmVnaXN0ZXJlZCB9IGZyb20gXCIuL1V0aWxzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBTeXN0ZW0ge1xuICBjYW5FeGVjdXRlKCkge1xuICAgIGlmICh0aGlzLl9tYW5kYXRvcnlRdWVyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX21hbmRhdG9yeVF1ZXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMuX21hbmRhdG9yeVF1ZXJpZXNbaV07XG4gICAgICBpZiAocXVlcnkuZW50aXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuZ2V0TmFtZSgpO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQsIGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgIC8vIEB0b2RvIEJldHRlciBuYW1pbmcgOilcbiAgICB0aGlzLl9xdWVyaWVzID0ge307XG4gICAgdGhpcy5xdWVyaWVzID0ge307XG5cbiAgICB0aGlzLnByaW9yaXR5ID0gMDtcblxuICAgIC8vIFVzZWQgZm9yIHN0YXRzXG4gICAgdGhpcy5leGVjdXRlVGltZSA9IDA7XG5cbiAgICBpZiAoYXR0cmlidXRlcyAmJiBhdHRyaWJ1dGVzLnByaW9yaXR5KSB7XG4gICAgICB0aGlzLnByaW9yaXR5ID0gYXR0cmlidXRlcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICB0aGlzLl9tYW5kYXRvcnlRdWVyaWVzID0gW107XG5cbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgICAgdmFyIHF1ZXJ5Q29uZmlnID0gdGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIHZhciBDb21wb25lbnRzID0gcXVlcnlDb25maWcuY29tcG9uZW50cztcbiAgICAgICAgaWYgKCFDb21wb25lbnRzIHx8IENvbXBvbmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ2NvbXBvbmVudHMnIGF0dHJpYnV0ZSBjYW4ndCBiZSBlbXB0eSBpbiBhIHF1ZXJ5XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV0ZWN0IGlmIHRoZSBjb21wb25lbnRzIGhhdmUgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWRcbiAgICAgICAgbGV0IHVucmVnaXN0ZXJlZENvbXBvbmVudHMgPSBDb21wb25lbnRzLmZpbHRlcihcbiAgICAgICAgICAoQ29tcG9uZW50KSA9PiAhY29tcG9uZW50UmVnaXN0ZXJlZChDb21wb25lbnQpXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHVucmVnaXN0ZXJlZENvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBUcmllZCB0byBjcmVhdGUgYSBxdWVyeSAnJHtcbiAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICAgICAgICB9LiR7cXVlcnlOYW1lfScgd2l0aCB1bnJlZ2lzdGVyZWQgY29tcG9uZW50czogWyR7dW5yZWdpc3RlcmVkQ29tcG9uZW50c1xuICAgICAgICAgICAgICAubWFwKChjKSA9PiBjLmdldE5hbWUoKSlcbiAgICAgICAgICAgICAgLmpvaW4oXCIsIFwiKX1dYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLndvcmxkLmVudGl0eU1hbmFnZXIucXVlcnlDb21wb25lbnRzKENvbXBvbmVudHMpO1xuXG4gICAgICAgIHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXSA9IHF1ZXJ5O1xuICAgICAgICBpZiAocXVlcnlDb25maWcubWFuZGF0b3J5ID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5fbWFuZGF0b3J5UXVlcmllcy5wdXNoKHF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXSA9IHtcbiAgICAgICAgICByZXN1bHRzOiBxdWVyeS5lbnRpdGllcyxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWFjdGl2ZSBjb25maWd1cmF0aW9uIGFkZGVkL3JlbW92ZWQvY2hhbmdlZFxuICAgICAgICB2YXIgdmFsaWRFdmVudHMgPSBbXCJhZGRlZFwiLCBcInJlbW92ZWRcIiwgXCJjaGFuZ2VkXCJdO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50TWFwcGluZyA9IHtcbiAgICAgICAgICBhZGRlZDogUXVlcnkucHJvdG90eXBlLkVOVElUWV9BRERFRCxcbiAgICAgICAgICByZW1vdmVkOiBRdWVyeS5wcm90b3R5cGUuRU5USVRZX1JFTU9WRUQsXG4gICAgICAgICAgY2hhbmdlZDogUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VELCAvLyBRdWVyeS5wcm90b3R5cGUuRU5USVRZX0NIQU5HRURcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocXVlcnlDb25maWcubGlzdGVuKSB7XG4gICAgICAgICAgdmFsaWRFdmVudHMuZm9yRWFjaCgoZXZlbnROYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZXhlY3V0ZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgYFN5c3RlbSAnJHt0aGlzLmdldE5hbWUoKX0nIGhhcyBkZWZpbmVkIGxpc3RlbiBldmVudHMgKCR7dmFsaWRFdmVudHMuam9pbihcbiAgICAgICAgICAgICAgICAgIFwiLCBcIlxuICAgICAgICAgICAgICAgICl9KSBmb3IgcXVlcnkgJyR7cXVlcnlOYW1lfScgYnV0IGl0IGRvZXMgbm90IGltcGxlbWVudCB0aGUgJ2V4ZWN1dGUnIG1ldGhvZC5gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElzIHRoZSBldmVudCBlbmFibGVkIG9uIHRoaXMgc3lzdGVtJ3MgcXVlcnk/XG4gICAgICAgICAgICBpZiAocXVlcnlDb25maWcubGlzdGVuW2V2ZW50TmFtZV0pIHtcbiAgICAgICAgICAgICAgbGV0IGV2ZW50ID0gcXVlcnlDb25maWcubGlzdGVuW2V2ZW50TmFtZV07XG5cbiAgICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gXCJjaGFuZ2VkXCIpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5yZWFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBBbnkgY2hhbmdlIG9uIHRoZSBlbnRpdHkgZnJvbSB0aGUgY29tcG9uZW50cyBpbiB0aGUgcXVlcnlcbiAgICAgICAgICAgICAgICAgIGxldCBldmVudExpc3QgPSAodGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV1bZXZlbnROYW1lXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsXG4gICAgICAgICAgICAgICAgICAgIChlbnRpdHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50TGlzdC5pbmRleE9mKGVudGl0eSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3QucHVzaChlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICBsZXQgZXZlbnRMaXN0ID0gKHRoaXMucXVlcmllc1txdWVyeU5hbWVdW2V2ZW50TmFtZV0gPSBbXSk7XG4gICAgICAgICAgICAgICAgICBxdWVyeS5ldmVudERpc3BhdGNoZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgICAgUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VELFxuICAgICAgICAgICAgICAgICAgICAoZW50aXR5LCBjaGFuZ2VkQ29tcG9uZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gQXZvaWQgZHVwbGljYXRlc1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmluZGV4T2YoY2hhbmdlZENvbXBvbmVudC5jb25zdHJ1Y3RvcikgIT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3QuaW5kZXhPZihlbnRpdHkpID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LnB1c2goZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAvLyBDaGVja2luZyBqdXN0IHNwZWNpZmljIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VkTGlzdCA9ICh0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXVtldmVudE5hbWVdID0ge30pO1xuICAgICAgICAgICAgICAgICAgZXZlbnQuZm9yRWFjaChjb21wb25lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXZlbnRMaXN0ID0gKGNoYW5nZWRMaXN0W1xuICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFByb3BlcnR5TmFtZShjb21wb25lbnQpXG4gICAgICAgICAgICAgICAgICAgIF0gPSBbXSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5DT01QT05FTlRfQ0hBTkdFRCxcbiAgICAgICAgICAgICAgICAgICAgICAoZW50aXR5LCBjaGFuZ2VkQ29tcG9uZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWRDb21wb25lbnQuY29uc3RydWN0b3IgPT09IGNvbXBvbmVudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3QuaW5kZXhPZihlbnRpdHkpID09PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRMaXN0ID0gKHRoaXMucXVlcmllc1txdWVyeU5hbWVdW2V2ZW50TmFtZV0gPSBbXSk7XG5cbiAgICAgICAgICAgICAgICBxdWVyeS5ldmVudERpc3BhdGNoZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgIGV2ZW50TWFwcGluZ1tldmVudE5hbWVdLFxuICAgICAgICAgICAgICAgICAgKGVudGl0eSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAZml4bWUgb3ZlcmhlYWQ/XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudExpc3QuaW5kZXhPZihlbnRpdHkpID09PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3QucHVzaChlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5leGVjdXRlVGltZSA9IDA7XG4gICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBwbGF5KCkge1xuICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICAvLyBAcXVlc3Rpb24gcmVuYW1lIHRvIGNsZWFyIHF1ZXVlcz9cbiAgY2xlYXJFdmVudHMoKSB7XG4gICAgZm9yIChsZXQgcXVlcnlOYW1lIGluIHRoaXMucXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICBpZiAocXVlcnkuYWRkZWQpIHtcbiAgICAgICAgcXVlcnkuYWRkZWQubGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICAgIGlmIChxdWVyeS5yZW1vdmVkKSB7XG4gICAgICAgIHF1ZXJ5LnJlbW92ZWQubGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICAgIGlmIChxdWVyeS5jaGFuZ2VkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHF1ZXJ5LmNoYW5nZWQpKSB7XG4gICAgICAgICAgcXVlcnkuY2hhbmdlZC5sZW5ndGggPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAobGV0IG5hbWUgaW4gcXVlcnkuY2hhbmdlZCkge1xuICAgICAgICAgICAgcXVlcnkuY2hhbmdlZFtuYW1lXS5sZW5ndGggPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICB2YXIganNvbiA9IHtcbiAgICAgIG5hbWU6IHRoaXMuZ2V0TmFtZSgpLFxuICAgICAgZW5hYmxlZDogdGhpcy5lbmFibGVkLFxuICAgICAgZXhlY3V0ZVRpbWU6IHRoaXMuZXhlY3V0ZVRpbWUsXG4gICAgICBwcmlvcml0eTogdGhpcy5wcmlvcml0eSxcbiAgICAgIHF1ZXJpZXM6IHt9LFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcmllcyA9IHRoaXMuY29uc3RydWN0b3IucXVlcmllcztcbiAgICAgIGZvciAobGV0IHF1ZXJ5TmFtZSBpbiBxdWVyaWVzKSB7XG4gICAgICAgIGxldCBxdWVyeSA9IHRoaXMucXVlcmllc1txdWVyeU5hbWVdO1xuICAgICAgICBsZXQgcXVlcnlEZWZpbml0aW9uID0gcXVlcmllc1txdWVyeU5hbWVdO1xuICAgICAgICBsZXQganNvblF1ZXJ5ID0gKGpzb24ucXVlcmllc1txdWVyeU5hbWVdID0ge1xuICAgICAgICAgIGtleTogdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdLmtleSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAganNvblF1ZXJ5Lm1hbmRhdG9yeSA9IHF1ZXJ5RGVmaW5pdGlvbi5tYW5kYXRvcnkgPT09IHRydWU7XG4gICAgICAgIGpzb25RdWVyeS5yZWFjdGl2ZSA9XG4gICAgICAgICAgcXVlcnlEZWZpbml0aW9uLmxpc3RlbiAmJlxuICAgICAgICAgIChxdWVyeURlZmluaXRpb24ubGlzdGVuLmFkZGVkID09PSB0cnVlIHx8XG4gICAgICAgICAgICBxdWVyeURlZmluaXRpb24ubGlzdGVuLnJlbW92ZWQgPT09IHRydWUgfHxcbiAgICAgICAgICAgIHF1ZXJ5RGVmaW5pdGlvbi5saXN0ZW4uY2hhbmdlZCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShxdWVyeURlZmluaXRpb24ubGlzdGVuLmNoYW5nZWQpKTtcblxuICAgICAgICBpZiAoanNvblF1ZXJ5LnJlYWN0aXZlKSB7XG4gICAgICAgICAganNvblF1ZXJ5Lmxpc3RlbiA9IHt9O1xuXG4gICAgICAgICAgY29uc3QgbWV0aG9kcyA9IFtcImFkZGVkXCIsIFwicmVtb3ZlZFwiLCBcImNoYW5nZWRcIl07XG4gICAgICAgICAgbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHtcbiAgICAgICAgICAgIGlmIChxdWVyeVttZXRob2RdKSB7XG4gICAgICAgICAgICAgIGpzb25RdWVyeS5saXN0ZW5bbWV0aG9kXSA9IHtcbiAgICAgICAgICAgICAgICBlbnRpdGllczogcXVlcnlbbWV0aG9kXS5sZW5ndGgsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxufVxuXG5TeXN0ZW0uaXNTeXN0ZW0gPSB0cnVlO1xuU3lzdGVtLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmRpc3BsYXlOYW1lIHx8IHRoaXMubmFtZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBOb3QoQ29tcG9uZW50KSB7XG4gIHJldHVybiB7XG4gICAgb3BlcmF0b3I6IFwibm90XCIsXG4gICAgQ29tcG9uZW50OiBDb21wb25lbnQsXG4gIH07XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi9Db21wb25lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIFRhZ0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKGZhbHNlKTtcbiAgfVxufVxuXG5UYWdDb21wb25lbnQuaXNUYWdDb21wb25lbnQgPSB0cnVlO1xuIiwiZXhwb3J0IGNvbnN0IGNvcHlWYWx1ZSA9IChzcmMpID0+IHNyYztcblxuZXhwb3J0IGNvbnN0IGNsb25lVmFsdWUgPSAoc3JjKSA9PiBzcmM7XG5cbmV4cG9ydCBjb25zdCBjb3B5QXJyYXkgPSAoc3JjLCBkZXN0KSA9PiB7XG4gIGlmICghc3JjKSB7XG4gICAgcmV0dXJuIHNyYztcbiAgfVxuXG4gIGlmICghZGVzdCkge1xuICAgIHJldHVybiBzcmMuc2xpY2UoKTtcbiAgfVxuXG4gIGRlc3QubGVuZ3RoID0gMDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNyYy5sZW5ndGg7IGkrKykge1xuICAgIGRlc3QucHVzaChzcmNbaV0pO1xuICB9XG5cbiAgcmV0dXJuIGRlc3Q7XG59O1xuXG5leHBvcnQgY29uc3QgY2xvbmVBcnJheSA9IChzcmMpID0+IHNyYyAmJiBzcmMuc2xpY2UoKTtcblxuZXhwb3J0IGNvbnN0IGNvcHlKU09OID0gKHNyYykgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzcmMpKTtcblxuZXhwb3J0IGNvbnN0IGNsb25lSlNPTiA9IChzcmMpID0+IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3JjKSk7XG5cbmV4cG9ydCBjb25zdCBjb3B5Q29weWFibGUgPSAoc3JjLCBkZXN0KSA9PiB7XG4gIGlmICghc3JjKSB7XG4gICAgcmV0dXJuIHNyYztcbiAgfVxuXG4gIGlmICghZGVzdCkge1xuICAgIHJldHVybiBzcmMuY2xvbmUoKTtcbiAgfVxuXG4gIHJldHVybiBkZXN0LmNvcHkoc3JjKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjbG9uZUNsb25hYmxlID0gKHNyYykgPT4gc3JjICYmIHNyYy5jbG9uZSgpO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHlwZSh0eXBlRGVmaW5pdGlvbikge1xuICB2YXIgbWFuZGF0b3J5UHJvcGVydGllcyA9IFtcIm5hbWVcIiwgXCJkZWZhdWx0XCIsIFwiY29weVwiLCBcImNsb25lXCJdO1xuXG4gIHZhciB1bmRlZmluZWRQcm9wZXJ0aWVzID0gbWFuZGF0b3J5UHJvcGVydGllcy5maWx0ZXIoKHApID0+IHtcbiAgICByZXR1cm4gIXR5cGVEZWZpbml0aW9uLmhhc093blByb3BlcnR5KHApO1xuICB9KTtcblxuICBpZiAodW5kZWZpbmVkUHJvcGVydGllcy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYGNyZWF0ZVR5cGUgZXhwZWN0cyBhIHR5cGUgZGVmaW5pdGlvbiB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczogJHt1bmRlZmluZWRQcm9wZXJ0aWVzLmpvaW4oXG4gICAgICAgIFwiLCBcIlxuICAgICAgKX1gXG4gICAgKTtcbiAgfVxuXG4gIHR5cGVEZWZpbml0aW9uLmlzVHlwZSA9IHRydWU7XG5cbiAgcmV0dXJuIHR5cGVEZWZpbml0aW9uO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkIHR5cGVzXG4gKi9cbmV4cG9ydCBjb25zdCBUeXBlcyA9IHtcbiAgTnVtYmVyOiBjcmVhdGVUeXBlKHtcbiAgICBuYW1lOiBcIk51bWJlclwiLFxuICAgIGRlZmF1bHQ6IDAsXG4gICAgY29weTogY29weVZhbHVlLFxuICAgIGNsb25lOiBjbG9uZVZhbHVlLFxuICB9KSxcblxuICBCb29sZWFuOiBjcmVhdGVUeXBlKHtcbiAgICBuYW1lOiBcIkJvb2xlYW5cIixcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICBjb3B5OiBjb3B5VmFsdWUsXG4gICAgY2xvbmU6IGNsb25lVmFsdWUsXG4gIH0pLFxuXG4gIFN0cmluZzogY3JlYXRlVHlwZSh7XG4gICAgbmFtZTogXCJTdHJpbmdcIixcbiAgICBkZWZhdWx0OiBcIlwiLFxuICAgIGNvcHk6IGNvcHlWYWx1ZSxcbiAgICBjbG9uZTogY2xvbmVWYWx1ZSxcbiAgfSksXG5cbiAgQXJyYXk6IGNyZWF0ZVR5cGUoe1xuICAgIG5hbWU6IFwiQXJyYXlcIixcbiAgICBkZWZhdWx0OiBbXSxcbiAgICBjb3B5OiBjb3B5QXJyYXksXG4gICAgY2xvbmU6IGNsb25lQXJyYXksXG4gIH0pLFxuXG4gIFJlZjogY3JlYXRlVHlwZSh7XG4gICAgbmFtZTogXCJSZWZcIixcbiAgICBkZWZhdWx0OiB1bmRlZmluZWQsXG4gICAgY29weTogY29weVZhbHVlLFxuICAgIGNsb25lOiBjbG9uZVZhbHVlLFxuICB9KSxcblxuICBKU09OOiBjcmVhdGVUeXBlKHtcbiAgICBuYW1lOiBcIkpTT05cIixcbiAgICBkZWZhdWx0OiBudWxsLFxuICAgIGNvcHk6IGNvcHlKU09OLFxuICAgIGNsb25lOiBjbG9uZUpTT04sXG4gIH0pLFxufTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgVHlwZXMgfSBmcm9tIFwiZWNzeVwiO1xuXG5jbGFzcyBQb3NpdGlvbiBleHRlbmRzIENvbXBvbmVudDx7fT4ge1xuICB4ITogbnVtYmVyO1xuICB5ITogbnVtYmVyO1xufVxuUG9zaXRpb24uc2NoZW1hID0ge1xuICB4OiB7IHR5cGU6IFR5cGVzLk51bWJlciB9LFxuICB5OiB7IHR5cGU6IFR5cGVzLk51bWJlciB9LFxufTtcblxuZXhwb3J0IHsgUG9zaXRpb24gfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgVHlwZXMgfSBmcm9tIFwiZWNzeVwiO1xuXG5jbGFzcyBWZWxvY2l0eSBleHRlbmRzIENvbXBvbmVudDx7fT4ge1xuICB4ITogbnVtYmVyO1xuICB5ITogbnVtYmVyO1xufVxuVmVsb2NpdHkuc2NoZW1hID0ge1xuICB4OiB7IHR5cGU6IFR5cGVzLk51bWJlciB9LFxuICB5OiB7IHR5cGU6IFR5cGVzLk51bWJlciB9LFxufTtcblxuZXhwb3J0IHsgVmVsb2NpdHkgfTtcbiIsImltcG9ydCB7IFRhZ0NvbXBvbmVudCB9IGZyb20gXCJlY3N5XCI7XG5cbmNsYXNzIFJlbmRlcmFibGUgZXh0ZW5kcyBUYWdDb21wb25lbnQge31cblxuZXhwb3J0IHsgUmVuZGVyYWJsZSB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBUeXBlcyB9IGZyb20gXCJlY3N5XCI7XG5cbmNsYXNzIFNoYXBlIGV4dGVuZHMgQ29tcG9uZW50PHt9PiB7XG4gIHByaW1pdGl2ZSE6IHN0cmluZztcbn1cblNoYXBlLnNjaGVtYSA9IHtcbiAgcHJpbWl0aXZlOiB7IHR5cGU6IFR5cGVzLlN0cmluZywgZGVmYXVsdDogXCJib3hcIiB9LFxufTtcblxuZXhwb3J0IHsgU2hhcGUgfTtcbiIsImltcG9ydCB7IEFwcGxpY2F0aW9uLCBJQXBwbGljYXRpb25PcHRpb25zIH0gZnJvbSBcInBpeGkuanNcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgVHlwZXMgfSBmcm9tIFwiZWNzeVwiO1xuXG4vLyBQb3NpdGlvbiBjb21wb25lbnRcbmNsYXNzIEVuZ2luZSBleHRlbmRzIENvbXBvbmVudDx7fT4ge1xuICBjb25maWc/OiBJQXBwbGljYXRpb25PcHRpb25zO1xuICBhcHA/OiBBcHBsaWNhdGlvbjtcbiAgZWxlbT86IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5jb25maWcgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5hcHAgPSB1bmRlZmluZWQ7XG4gIH1cbn1cbkVuZ2luZS5zY2hlbWEgPSB7XG4gIGFwcDogeyB0eXBlOiBUeXBlcy5SZWYgfSxcbiAgZWxlbTogeyB0eXBlOiBUeXBlcy5SZWYgfSxcbiAgY29uZmlnOiB7IHR5cGU6IFR5cGVzLkpTT04gfSxcbn07XG5cbmV4cG9ydCB7IEVuZ2luZSB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBjcmVhdGVUeXBlLCBjb3B5VmFsdWUsIGNsb25lVmFsdWUsIFR5cGVzLCBTeXN0ZW1TdGF0ZUNvbXBvbmVudCB9IGZyb20gXCJlY3N5XCI7XG5pbXBvcnQgeyBTcHJpdGUgYXMgUElYSVNwcml0ZSB9IGZyb20gXCJwaXhpLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBTcHJpdGUgZXh0ZW5kcyBDb21wb25lbnQ8e30+IHtcbiAgbmFtZT86IHN0cmluZztcbiAgZmlsZU5hbWU/OiBzdHJpbmc7XG59XG5TcHJpdGUuc2NoZW1hID0ge1xuICBuYW1lOiB7XG4gICAgdHlwZTogVHlwZXMuU3RyaW5nLFxuICB9LFxuICBmaWxlTmFtZToge1xuICAgIHR5cGU6IFR5cGVzLlN0cmluZyxcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBQaXhpUmVmID0gY3JlYXRlVHlwZTxQSVhJU3ByaXRlLCB1bmRlZmluZWQ+KHtcbiAgbmFtZTogXCJQaXhpUmVmXCIsXG4gIGRlZmF1bHQ6IHVuZGVmaW5lZCxcbiAgY29weTogY29weVZhbHVlLFxuICBjbG9uZTogY2xvbmVWYWx1ZSxcbn0pO1xuXG4vLyBmb3IgUGl4aSBTcHJpdGUgcmVmZXJlbmNpbmdcbmV4cG9ydCBjbGFzcyBTcHJpdGVTdGF0ZSBleHRlbmRzIFN5c3RlbVN0YXRlQ29tcG9uZW50PHt9PiB7XG4gIHJlZj86IFBJWElTcHJpdGU7XG59XG5TcHJpdGVTdGF0ZS5zY2hlbWEgPSB7XG4gIHJlZjogeyB0eXBlOiBQaXhpUmVmIH0sXG59O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBTeXN0ZW1TdGF0ZUNvbXBvbmVudCwgVHlwZXMgfSBmcm9tIFwiZWNzeVwiO1xuXG5jbGFzcyBSZXNvdXJjZSBleHRlbmRzIENvbXBvbmVudDx7fT4ge1xuICBuYW1lPzogc3RyaW5nO1xuICB1cmw/OiBzdHJpbmc7XG59XG5SZXNvdXJjZS5zY2hlbWEgPSB7XG4gIG5hbWU6IHsgdHlwZTogVHlwZXMuU3RyaW5nIH0sXG4gIHVybDogeyB0eXBlOiBUeXBlcy5TdHJpbmcgfSxcbn07XG5cbmNsYXNzIFJlc291cmNlU3RhdGUgZXh0ZW5kcyBTeXN0ZW1TdGF0ZUNvbXBvbmVudDx7fT4ge1xuICBzdGF0ZT86IHN0cmluZztcbiAgcHJvZ3Jlc3M6IGFueTtcbn1cblJlc291cmNlU3RhdGUuc2NoZW1hID0ge1xuICBzdGF0ZTogeyB0eXBlOiBUeXBlcy5TdHJpbmcgfSxcbiAgcHJvZ3Jlc3M6IHsgdHlwZTogVHlwZXMuSlNPTiB9LFxufTtcblxuZXhwb3J0IHsgUmVzb3VyY2UsIFJlc291cmNlU3RhdGUgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgVHlwZXMgfSBmcm9tIFwiZWNzeVwiO1xuXG5jbGFzcyBMaWZldGltZSBleHRlbmRzIENvbXBvbmVudDx7fT4ge1xuICB0aW1lITogbnVtYmVyO1xufVxuTGlmZXRpbWUuc2NoZW1hID0ge1xuICB0aW1lOiB7IHR5cGU6IFR5cGVzLk51bWJlciB9LFxufTtcblxuZXhwb3J0IHsgTGlmZXRpbWUgfTtcbiIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCJlY3N5XCI7XG5pbXBvcnQgeyBWZWxvY2l0eSwgUG9zaXRpb24sIFNwcml0ZVN0YXRlLCBMaWZldGltZSB9IGZyb20gXCIuLi9jb21wb25lbnRzXCI7XG5cbmNsYXNzIE1vdmFibGVTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBleGVjdXRlKGRlbHRhOiBudW1iZXIsIHRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucXVlcmllcy5tb3ZpbmcucmVzdWx0cy5mb3JFYWNoKChlbnRpdHkpID0+IHtcbiAgICAgIGxldCBzcHJpdGVTdGF0ZSA9IGVudGl0eS5nZXRDb21wb25lbnQoU3ByaXRlU3RhdGUpO1xuICAgICAgbGV0IGxpZmV0aW1lID0gZW50aXR5LmdldENvbXBvbmVudChMaWZldGltZSk7XG4gICAgICBsZXQgdmVsb2NpdHkgPSBlbnRpdHkuZ2V0TXV0YWJsZUNvbXBvbmVudChWZWxvY2l0eSk7XG4gICAgICBsZXQgcG9zaXRpb24gPSBlbnRpdHkuZ2V0TXV0YWJsZUNvbXBvbmVudChQb3NpdGlvbik7XG4gICAgICBsZXQgc3ByaXRlID0gc3ByaXRlU3RhdGU/LnJlZjtcbiAgICAgIGlmIChwb3NpdGlvbiAmJiB2ZWxvY2l0eSAmJiBzcHJpdGUgJiYgbGlmZXRpbWUpIHtcbiAgICAgICAgcG9zaXRpb24ueCArPSB2ZWxvY2l0eS54ICogbGlmZXRpbWUudGltZTtcbiAgICAgICAgcG9zaXRpb24ueSArPSB2ZWxvY2l0eS55ICogbGlmZXRpbWUudGltZTtcblxuICAgICAgICBpZiAocG9zaXRpb24ueCA+IHdpbmRvdy5pbm5lcldpZHRoICsgc3ByaXRlLndpZHRoKSBwb3NpdGlvbi54ID0gLXNwcml0ZS53aWR0aDtcbiAgICAgICAgaWYgKHBvc2l0aW9uLnggPCAtc3ByaXRlLndpZHRoKSBwb3NpdGlvbi54ID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGlmIChwb3NpdGlvbi55ID4gd2luZG93LmlubmVySGVpZ2h0ICsgc3ByaXRlLmhlaWdodCkgcG9zaXRpb24ueSA9IC1zcHJpdGUuaGVpZ2h0O1xuICAgICAgICBpZiAocG9zaXRpb24ueSA8IC1zcHJpdGUuaGVpZ2h0KSBwb3NpdGlvbi55ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbk1vdmFibGVTeXN0ZW0ucXVlcmllcyA9IHtcbiAgbW92aW5nOiB7XG4gICAgY29tcG9uZW50czogW1ZlbG9jaXR5LCBQb3NpdGlvbiwgTGlmZXRpbWUsIFNwcml0ZVN0YXRlXSxcbiAgfSxcbn07XG5cbmV4cG9ydCB7IE1vdmFibGVTeXN0ZW0gfTtcbiIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCJlY3N5XCI7XG5pbXBvcnQgeyBFbmdpbmUsIFJlbmRlcmFibGUsIFNoYXBlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHNcIjtcblxuY2xhc3MgUmVuZGVyZXJTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xuICBleGVjdXRlKGRlbHRhOiBudW1iZXIsIHRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBhcHAgPSB0aGlzLnF1ZXJpZXMuZW5naW5lLnJlc3VsdHNbMF0uZ2V0Q29tcG9uZW50KEVuZ2luZSk/LmFwcDtcbiAgICB0aGlzLnF1ZXJpZXMucmVuZGVyYWJsZXMucmVzdWx0cy5mb3JFYWNoKChlbnRpdHkpID0+IHt9KTtcbiAgfVxufVxuXG5SZW5kZXJlclN5c3RlbS5xdWVyaWVzID0ge1xuICBlbmdpbmU6IHsgY29tcG9uZW50czogW0VuZ2luZV0gfSxcbiAgcmVuZGVyYWJsZXM6IHsgY29tcG9uZW50czogW1JlbmRlcmFibGUsIFNoYXBlXSB9LFxufTtcblxuZXhwb3J0IHsgUmVuZGVyZXJTeXN0ZW0gfTtcbiIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCJlY3N5XCI7XG5pbXBvcnQgdHlwZSB7IFdvcmxkLCBBdHRyaWJ1dGVzIH0gZnJvbSBcImVjc3lcIjtcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gXCIuLi9jb21wb25lbnRzXCI7XG5pbXBvcnQgeyBBcHBsaWNhdGlvbiB9IGZyb20gXCJwaXhpLmpzXCI7XG5cbmNsYXNzIEVuZ2luZVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGNvbnN0cnVjdG9yKHdvcmxkOiBXb3JsZCwgYXR0cmlidXRlczogQXR0cmlidXRlcykge1xuICAgIHN1cGVyKHdvcmxkLCBhdHRyaWJ1dGVzKTtcbiAgICBjb25zb2xlLmxvZyhcIkNyZWF0aW9uIG9mIEVuZ2luZVN5c3RlbVwiKTtcbiAgfVxuXG4gIGV4ZWN1dGUoZGVsdGE6IG51bWJlciwgdGltZTogbnVtYmVyKSB7XG4gICAgbGV0IGVuZ2luZSA9IHRoaXMucXVlcmllcy5lbmdpbmUucmVzdWx0c1swXS5nZXRNdXRhYmxlQ29tcG9uZW50KEVuZ2luZSk7XG4gICAgaWYgKGVuZ2luZSAmJiAhZW5naW5lLmFwcCkge1xuICAgICAgZW5naW5lLmFwcCA9IG5ldyBBcHBsaWNhdGlvbihlbmdpbmUuY29uZmlnKTtcbiAgICAgIGVuZ2luZS5hcHAuc3RhZ2Uuc29ydGFibGVDaGlsZHJlbiA9IHRydWU7XG4gICAgICBlbmdpbmUuZWxlbT8uYXBwZW5kQ2hpbGQoZW5naW5lLmFwcC52aWV3KTtcbiAgICB9XG4gIH1cbn1cblxuRW5naW5lU3lzdGVtLnF1ZXJpZXMgPSB7XG4gIGVuZ2luZToge1xuICAgIGNvbXBvbmVudHM6IFtFbmdpbmVdLFxuICB9LFxufTtcblxuZXhwb3J0IHsgRW5naW5lU3lzdGVtIH07XG4iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgRW5naW5lLCBSZXNvdXJjZVN0YXRlLCBSZXNvdXJjZSB9IGZyb20gXCIuLi9jb21wb25lbnRzXCI7XG5pbXBvcnQgeyBMb2FkZXIgfSBmcm9tIFwicGl4aS5qc1wiO1xuXG5jbGFzcyBSZXNvdXJjZUxvYWRlclN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGV4ZWN1dGUoZGVsdGE6IG51bWJlciwgdGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGFwcCA9IHRoaXMucXVlcmllcy5lbmdpbmUucmVzdWx0c1swXS5nZXRDb21wb25lbnQoRW5naW5lKT8uYXBwO1xuICAgIGlmICh0aGlzLnF1ZXJpZXMubG9hZGVyU3RhdGUucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc3RvcFN5c3RlbXNBZnRlcigpO1xuICAgICAgdGhpcy5xdWVyaWVzLnRvTG9hZC5yZXN1bHRzLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgICBsZXQgdXJsID0gZW50aXR5LmdldENvbXBvbmVudChSZXNvdXJjZSk/LnVybDtcbiAgICAgICAgbGV0IG5hbWUgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFJlc291cmNlKT8ubmFtZTtcbiAgICAgICAgaWYgKG5hbWUgJiYgdXJsKSB7XG4gICAgICAgICAgYXBwPy5sb2FkZXIuYWRkKG5hbWUsIHVybCwgKCkgPT4ge30pO1xuICAgICAgICAgIHRoaXMud29ybGQuY3JlYXRlRW50aXR5KCkuYWRkQ29tcG9uZW50KFJlc291cmNlU3RhdGUsIHsgc3RhdGU6IFwidG9Mb2FkXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbG9hZGluZ1N0YXRlID0gdGhpcy5xdWVyaWVzLmxvYWRlclN0YXRlLnJlc3VsdHNbMF0uZ2V0TXV0YWJsZUNvbXBvbmVudChSZXNvdXJjZVN0YXRlKTtcbiAgICAgIGlmIChsb2FkaW5nU3RhdGU/LnN0YXRlID09PSBcInRvTG9hZFwiKSB7XG4gICAgICAgIGxvYWRpbmdTdGF0ZS5zdGF0ZSA9IFwibG9hZGluZ1wiO1xuICAgICAgICBhcHA/LmxvYWRlci5sb2FkKCgpID0+IHtcbiAgICAgICAgICBpZiAobG9hZGluZ1N0YXRlKSBsb2FkaW5nU3RhdGUuc3RhdGUgPSBcImxvYWRlZFwiO1xuICAgICAgICAgIHRoaXMuc3RhcnRTeXN0ZW1zQWZ0ZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFwcD8ubG9hZGVyLm9uUHJvZ3Jlc3MuYWRkKChsb2FkZXI6IGFueSwgcmVzb3VyY2U6IGFueSkgPT4ge1xuICAgICAgICAgIGlmIChsb2FkaW5nU3RhdGUpIGxvYWRpbmdTdGF0ZS5wcm9ncmVzcyA9IGxvYWRlci5wcm9ncmVzcztcbiAgICAgICAgICBpZiAocmVzb3VyY2UuZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMb2FkaW5nIG9mICR7cmVzb3VyY2UubmFtZX0gYXQgJHtyZXNvdXJjZS51cmx9IGZhaWxlZCFgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYExvYWRpbmcgb2YgJHtyZXNvdXJjZS5uYW1lfSBhdCAke3Jlc291cmNlLnVybH0gc3VjY2VlZCFgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0b3BTeXN0ZW1zQWZ0ZXIoKSB7XG4gICAgbGV0IHN5c3RlbXMgPSB0aGlzLndvcmxkLmdldFN5c3RlbXMoKTtcbiAgICBsZXQgbXlJbmRleCA9IHN5c3RlbXMuZmluZEluZGV4KChzeXN0ZW0pID0+IHN5c3RlbSBpbnN0YW5jZW9mIFJlc291cmNlTG9hZGVyU3lzdGVtKTtcbiAgICBmb3IgKHZhciBpID0gbXlJbmRleCArIDE7IGkgPCBzeXN0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzeXN0ZW1zW2ldLnN0b3AoKTtcbiAgICB9XG4gIH1cblxuICBzdGFydFN5c3RlbXNBZnRlcigpIHtcbiAgICBsZXQgc3lzdGVtcyA9IHRoaXMud29ybGQuZ2V0U3lzdGVtcygpO1xuICAgIGxldCBteUluZGV4ID0gc3lzdGVtcy5maW5kSW5kZXgoKHN5c3RlbSkgPT4gc3lzdGVtIGluc3RhbmNlb2YgUmVzb3VyY2VMb2FkZXJTeXN0ZW0pO1xuICAgIGZvciAodmFyIGkgPSBteUluZGV4ICsgMTsgaSA8IHN5c3RlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN5c3RlbXNbaV0ucGxheSgpO1xuICAgIH1cbiAgfVxufVxuXG5SZXNvdXJjZUxvYWRlclN5c3RlbS5xdWVyaWVzID0ge1xuICBsb2FkZXJTdGF0ZTogeyBjb21wb25lbnRzOiBbUmVzb3VyY2VTdGF0ZV0gfSxcbiAgdG9Mb2FkOiB7IGNvbXBvbmVudHM6IFtSZXNvdXJjZV0gfSxcbiAgZW5naW5lOiB7IGNvbXBvbmVudHM6IFtFbmdpbmVdIH0sXG59O1xuXG5leHBvcnQgeyBSZXNvdXJjZUxvYWRlclN5c3RlbSB9O1xuIiwiaW1wb3J0IHsgU3lzdGVtLCBOb3QgfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgRW5naW5lLCBQb3NpdGlvbiwgU3ByaXRlLCBTcHJpdGVTdGF0ZSB9IGZyb20gXCIuLi9jb21wb25lbnRzXCI7XG5pbXBvcnQgeyBTcHJpdGUgYXMgUElYSVNwcml0ZSB9IGZyb20gXCJwaXhpLmpzXCI7XG5cbmNsYXNzIFNwcml0ZVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGV4ZWN1dGUoZGVsdGE6IG51bWJlciwgdGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGFwcCA9IHRoaXMucXVlcmllcy5lbmdpbmUucmVzdWx0c1swXS5nZXRDb21wb25lbnQoRW5naW5lKT8uYXBwO1xuICAgIHRoaXMucXVlcmllcy5jcmVhdGVzLnJlc3VsdHMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICBsZXQgc3ByaXRlSW5mbyA9IGVudGl0eS5nZXRDb21wb25lbnQoU3ByaXRlKTtcbiAgICAgIGxldCBwb3NpdGlvbiA9IGVudGl0eS5nZXRDb21wb25lbnQoUG9zaXRpb24pO1xuICAgICAgbGV0IHNoZWV0ID0gYXBwPy5sb2FkZXIucmVzb3VyY2VzW3Nwcml0ZUluZm8/Lm5hbWUgfHwgXCJcIl07XG4gICAgICBsZXQgc3ByaXRlID0gbmV3IFBJWElTcHJpdGUoc2hlZXQ/LnRleHR1cmUpO1xuXG4gICAgICBzcHJpdGUuc2NhbGUueCA9IHNwcml0ZS5zY2FsZS55ID0gMC4xICsgTWF0aC5yYW5kb20oKSAqIDAuMTtcbiAgICAgIGlmIChzcHJpdGUgJiYgcG9zaXRpb24pIHtcbiAgICAgICAgc3ByaXRlLnggPSBwb3NpdGlvbj8ueDtcbiAgICAgICAgc3ByaXRlLnkgPSBwb3NpdGlvbj8ueTtcbiAgICAgIH1cbiAgICAgIGFwcD8uc3RhZ2UuYWRkQ2hpbGQoc3ByaXRlKTtcbiAgICAgIGVudGl0eS5hZGRDb21wb25lbnQoU3ByaXRlU3RhdGUsIHsgcmVmOiBzcHJpdGUgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnF1ZXJpZXMudXBkYXRlcy5yZXN1bHRzLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgbGV0IHNwcml0ZUluZm8gPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFNwcml0ZSk7XG4gICAgICBsZXQgcG9zaXRpb24gPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFBvc2l0aW9uKTtcbiAgICAgIGxldCBzcHJpdGVTdGF0ZSA9IGVudGl0eS5nZXRNdXRhYmxlQ29tcG9uZW50KFNwcml0ZVN0YXRlKTtcbiAgICAgIGxldCBzcHJpdGUgPSBzcHJpdGVTdGF0ZT8ucmVmO1xuICAgICAgaWYgKHNwcml0ZVN0YXRlICYmIHNwcml0ZSAmJiBwb3NpdGlvbikge1xuICAgICAgICBzcHJpdGUueCA9IHBvc2l0aW9uPy54O1xuICAgICAgICBzcHJpdGUueSA9IHBvc2l0aW9uPy55O1xuICAgICAgICBzcHJpdGVTdGF0ZS5yZWYgPSBzcHJpdGU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuU3ByaXRlU3lzdGVtLnF1ZXJpZXMgPSB7XG4gIGNyZWF0ZXM6IHtcbiAgICBjb21wb25lbnRzOiBbU3ByaXRlLCBOb3QoU3ByaXRlU3RhdGUpLCBQb3NpdGlvbl0sXG4gIH0sXG4gIGRlbGV0ZXM6IHtcbiAgICBjb21wb25lbnRzOiBbTm90KFNwcml0ZSksIFNwcml0ZVN0YXRlXSxcbiAgfSxcbiAgdXBkYXRlczoge1xuICAgIGNvbXBvbmVudHM6IFtTcHJpdGUsIFNwcml0ZVN0YXRlLCBQb3NpdGlvbl0sXG4gIH0sXG4gIGVuZ2luZTogeyBjb21wb25lbnRzOiBbRW5naW5lXSB9LFxufTtcblxuZXhwb3J0IHsgU3ByaXRlU3lzdGVtIH07XG4iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiZWNzeVwiO1xuaW1wb3J0IHsgVmVsb2NpdHksIFBvc2l0aW9uLCBTcHJpdGVTdGF0ZSwgTGlmZXRpbWUgfSBmcm9tIFwiLi4vY29tcG9uZW50c1wiO1xuXG5jbGFzcyBMaWZldGltZVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGV4ZWN1dGUoZGVsdGE6IG51bWJlciwgdGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5xdWVyaWVzLmxpZmV0aW1lcy5yZXN1bHRzLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgICAgbGV0IGxpZmV0aW1lID0gZW50aXR5LmdldE11dGFibGVDb21wb25lbnQoTGlmZXRpbWUpO1xuICAgICAgaWYgKGxpZmV0aW1lKSBsaWZldGltZS50aW1lICs9IDE7XG4gICAgfSk7XG4gIH1cbn1cblxuTGlmZXRpbWVTeXN0ZW0ucXVlcmllcyA9IHtcbiAgbGlmZXRpbWVzOiB7XG4gICAgY29tcG9uZW50czogW0xpZmV0aW1lXSxcbiAgfSxcbn07XG5cbmV4cG9ydCB7IExpZmV0aW1lU3lzdGVtIH07XG4iLCJpbXBvcnQgeyBXb3JsZCB9IGZyb20gXCJlY3N5XCI7XG5pbXBvcnQge1xuICBFbmdpbmUsXG4gIFBvc2l0aW9uLFxuICBSZW5kZXJhYmxlLFxuICBSZXNvdXJjZSxcbiAgUmVzb3VyY2VTdGF0ZSxcbiAgU2hhcGUsXG4gIFZlbG9jaXR5LFxuICBTcHJpdGUsXG4gIFNwcml0ZVN0YXRlLFxuICBMaWZldGltZSxcbn0gZnJvbSBcIi4vY29tcG9uZW50c1wiO1xuaW1wb3J0IHtcbiAgRW5naW5lU3lzdGVtLFxuICBMaWZldGltZVN5c3RlbSxcbiAgTW92YWJsZVN5c3RlbSxcbiAgUmVuZGVyZXJTeXN0ZW0sXG4gIFJlc291cmNlTG9hZGVyU3lzdGVtLFxuICBTcHJpdGVTeXN0ZW0sXG59IGZyb20gXCIuL3N5c3RlbXNcIjtcbmltcG9ydCBJdGFrdXJhIGZyb20gXCIuLi8uLi9wdWJsaWMvaXRha3VyYS5wbmdcIjtcbmltcG9ydCBBZnJvIGZyb20gXCIuLi8uLi9wdWJsaWMvYWZyby5wbmdcIjtcblxuZnVuY3Rpb24gZ2V0U2V0dGluZ3MocGF0aDogc3RyaW5nLCBkZWZ1YWx0OiBudW1iZXIpOiBudW1iZXIge1xuICBsZXQgcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTtcbiAgcmV0dXJuIHBhcnNlRmxvYXQocy5nZXQocGF0aCkgfHwgXCJcIikgfHwgZGVmdWFsdDtcbn1cblxuY29uc3Qgd29ybGQgPSBuZXcgV29ybGQoKTtcbndvcmxkXG4gIC5yZWdpc3RlckNvbXBvbmVudChQb3NpdGlvbilcbiAgLnJlZ2lzdGVyQ29tcG9uZW50KFJlbmRlcmFibGUpXG4gIC5yZWdpc3RlckNvbXBvbmVudChTaGFwZSlcbiAgLnJlZ2lzdGVyQ29tcG9uZW50KFZlbG9jaXR5KVxuICAucmVnaXN0ZXJDb21wb25lbnQoRW5naW5lKVxuICAucmVnaXN0ZXJDb21wb25lbnQoUmVzb3VyY2UpXG4gIC5yZWdpc3RlckNvbXBvbmVudChSZXNvdXJjZVN0YXRlKVxuICAucmVnaXN0ZXJDb21wb25lbnQoU3ByaXRlKVxuICAucmVnaXN0ZXJDb21wb25lbnQoU3ByaXRlU3RhdGUpXG4gIC5yZWdpc3RlckNvbXBvbmVudChMaWZldGltZSlcbiAgLnJlZ2lzdGVyU3lzdGVtKE1vdmFibGVTeXN0ZW0pXG4gIC5yZWdpc3RlclN5c3RlbShSZW5kZXJlclN5c3RlbSlcbiAgLnJlZ2lzdGVyU3lzdGVtKEVuZ2luZVN5c3RlbSlcbiAgLnJlZ2lzdGVyU3lzdGVtKFJlc291cmNlTG9hZGVyU3lzdGVtKVxuICAucmVnaXN0ZXJTeXN0ZW0oU3ByaXRlU3lzdGVtKVxuICAucmVnaXN0ZXJTeXN0ZW0oTGlmZXRpbWVTeXN0ZW0pO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gIHJlc29sdXRpb246IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICBiYWNrZ3JvdW5kQ29sb3I6IDB4ZmZmZmZmLFxufTtcbmxldCBlbGVtID0gZG9jdW1lbnQuYm9keTtcbndvcmxkLmNyZWF0ZUVudGl0eSgpLmFkZENvbXBvbmVudChFbmdpbmUsIHtcbiAgZWxlbSxcbiAgY29uZmlnLFxufSk7XG5jb25zb2xlLmxvZyhcIndvcmxkIGNyZWF0ZWRcIik7XG5cbltcbiAgeyBuYW1lOiBcImFmcm9cIiwgdXJsOiBBZnJvIH0sXG4gIHsgbmFtZTogXCJpdGFrdXJhXCIsIHVybDogSXRha3VyYSB9LFxuXS5mb3JFYWNoKChyZXNvdXJjZSkgPT4ge1xuICB3b3JsZC5jcmVhdGVFbnRpdHkoKS5hZGRDb21wb25lbnQoUmVzb3VyY2UsIHJlc291cmNlKTtcbn0pO1xuXG5jb25zdCBzcGVlZCA9IGdldFNldHRpbmdzKFwic1wiLCAwLjAzKTtcbmZ1bmN0aW9uIGdldFJhbmRvbVZlbG9jaXR5KCkge1xuICByZXR1cm4ge1xuICAgIHg6IHNwZWVkICogKDIgKiBNYXRoLnJhbmRvbSgpIC0gMSkgKyAwLjAwMDAwMSxcbiAgICB5OiBzcGVlZCAqICgyICogTWF0aC5yYW5kb20oKSAtIDEpICsgMC4wMDAwMDEsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbVBvc2l0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHg6IE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICB5OiBNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVySGVpZ2h0LFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21TaGFwZSgpIHtcbiAgcmV0dXJuIHtcbiAgICBwcmltaXRpdmU6IE1hdGgucmFuZG9tKCkgPj0gMC41ID8gXCJhZnJvXCIgOiBcIml0YWt1cmFcIixcbiAgfTtcbn1cblxuZm9yIChsZXQgaSA9IDA7IGkgPCBnZXRTZXR0aW5ncyhcImNcIiwgMTAwKTsgaSsrKSB7XG4gIGxldCBzaGFwZSA9IGdldFJhbmRvbVNoYXBlKCk7XG4gIHdvcmxkXG4gICAgLmNyZWF0ZUVudGl0eSgpXG4gICAgLmFkZENvbXBvbmVudChWZWxvY2l0eSwgZ2V0UmFuZG9tVmVsb2NpdHkoKSlcbiAgICAuYWRkQ29tcG9uZW50KFNoYXBlLCBnZXRSYW5kb21TaGFwZSgpKVxuICAgIC5hZGRDb21wb25lbnQoUG9zaXRpb24sIGdldFJhbmRvbVBvc2l0aW9uKCkpXG4gICAgLmFkZENvbXBvbmVudChTcHJpdGUsIHsgbmFtZTogc2hhcGUucHJpbWl0aXZlIH0pXG4gICAgLmFkZENvbXBvbmVudChMaWZldGltZSwgeyB0aW1lOiAwIH0pO1xufVxuXG5sZXQgcHJldlRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuZnVuY3Rpb24gdXBkYXRlKHRpbWU6IG51bWJlcikge1xuICBjb25zdCBkdCA9IHRpbWUgLSBwcmV2VGltZTtcbiAgcHJldlRpbWUgPSB0aW1lO1xuXG4gIHdvcmxkLmV4ZWN1dGUoZHQsIHRpbWUpO1xuXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xufVxuXG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcbiIsImV4cG9ydCBjb25zdCBWZXJzaW9uID0gXCIwLjMuMVwiO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==